(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var It,M,zi,Be,Co,qi,Fi,Wi,zr,ur,cr,Vi,Mt={},Bi=[],Wa=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Dt=Array.isArray;function be(e,t){for(var n in t)e[n]=t[n];return e}function qr(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function O(e,t,n){var r,o,i,s={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?It.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return xt(e,s,r,o,null)}function xt(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++zi,__i:-1,__u:0};return o==null&&M.vnode!=null&&M.vnode(i),i}function Hi(){return{current:null}}function _e(e){return e.children}function pe(e,t){this.props=e,this.context=t}function ut(e,t){if(t==null)return e.__?ut(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?ut(e):null}function Qi(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Qi(e)}}function lr(e){(!e.__d&&(e.__d=!0)&&Be.push(e)&&!yn.__r++||Co!=M.debounceRendering)&&((Co=M.debounceRendering)||qi)(yn)}function yn(){for(var e,t,n,r,o,i,s,a=1;Be.length;)Be.length>a&&Be.sort(Fi),e=Be.shift(),a=Be.length,e.__d&&(n=void 0,o=(r=(t=e).__v).__e,i=[],s=[],t.__P&&((n=be({},r)).__v=r.__v+1,M.vnode&&M.vnode(n),Fr(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[o]:null,i,o??ut(r),!!(32&r.__u),s),n.__v=r.__v,n.__.__k[n.__i]=n,Yi(i,n,s),n.__e!=o&&Qi(n)));yn.__r=0}function Ki(e,t,n,r,o,i,s,a,u,c,f){var l,d,h,_,p,y,v=r&&r.__k||Bi,g=t.length;for(u=Va(n,t,v,u,g),l=0;l<g;l++)(h=n.__k[l])!=null&&(d=h.__i==-1?Mt:v[h.__i]||Mt,h.__i=l,y=Fr(e,h,d,o,i,s,a,u,c,f),_=h.__e,h.ref&&d.ref!=h.ref&&(d.ref&&Wr(d.ref,null,h),f.push(h.ref,h.__c||_,h)),p==null&&_!=null&&(p=_),4&h.__u||d.__k===h.__k?u=Ji(h,u,e):typeof h.type=="function"&&y!==void 0?u=y:_&&(u=_.nextSibling),h.__u&=-7);return n.__e=p,u}function Va(e,t,n,r,o){var i,s,a,u,c,f=n.length,l=f,d=0;for(e.__k=new Array(o),i=0;i<o;i++)(s=t[i])!=null&&typeof s!="boolean"&&typeof s!="function"?(u=i+d,(s=e.__k[i]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?xt(null,s,null,null,null):Dt(s)?xt(_e,{children:s},null,null,null):s.constructor==null&&s.__b>0?xt(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,a=null,(c=s.__i=Ba(s,n,u,l))!=-1&&(l--,(a=n[c])&&(a.__u|=2)),a==null||a.__v==null?(c==-1&&(o>f?d--:o<f&&d++),typeof s.type!="function"&&(s.__u|=4)):c!=u&&(c==u-1?d--:c==u+1?d++:(c>u?d--:d++,s.__u|=4))):e.__k[i]=null;if(l)for(i=0;i<f;i++)(a=n[i])!=null&&(2&a.__u)==0&&(a.__e==r&&(r=ut(a)),Zi(a,a));return r}function Ji(e,t,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=Ji(r[o],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=ut(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function Pe(e,t){return t=t||[],e==null||typeof e=="boolean"||(Dt(e)?e.some(function(n){Pe(n,t)}):t.push(e)),t}function Ba(e,t,n,r){var o,i,s,a=e.key,u=e.type,c=t[n],f=c!=null&&(2&c.__u)==0;if(c===null&&e.key==null||f&&a==c.key&&u==c.type)return n;if(r>(f?1:0)){for(o=n-1,i=n+1;o>=0||i<t.length;)if((c=t[s=o>=0?o--:i++])!=null&&(2&c.__u)==0&&a==c.key&&u==c.type)return s}return-1}function $o(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Wa.test(t)?n:n+"px"}function Gt(e,t,n,r,o){var i,s;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||$o(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||$o(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")i=t!=(t=t.replace(Wi,"$1")),s=t.toLowerCase(),t=s in e||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=zr,e.addEventListener(t,i?cr:ur,i)):e.removeEventListener(t,i?cr:ur,i);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Eo(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=zr++;else if(t.t<n.u)return;return n(M.event?M.event(t):t)}}}function Fr(e,t,n,r,o,i,s,a,u,c){var f,l,d,h,_,p,y,v,g,m,w,b,k,S,x,j,N,A=t.type;if(t.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),i=[a=t.__e=n.__e]),(f=M.__b)&&f(t);e:if(typeof A=="function")try{if(v=t.props,g="prototype"in A&&A.prototype.render,m=(f=A.contextType)&&r[f.__c],w=f?m?m.props.value:f.__:r,n.__c?y=(l=t.__c=n.__c).__=l.__E:(g?t.__c=l=new A(v,w):(t.__c=l=new pe(v,w),l.constructor=A,l.render=Qa),m&&m.sub(l),l.props=v,l.state||(l.state={}),l.context=w,l.__n=r,d=l.__d=!0,l.__h=[],l._sb=[]),g&&l.__s==null&&(l.__s=l.state),g&&A.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=be({},l.__s)),be(l.__s,A.getDerivedStateFromProps(v,l.__s))),h=l.props,_=l.state,l.__v=t,d)g&&A.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),g&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(g&&A.getDerivedStateFromProps==null&&v!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(v,w),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(v,l.__s,w)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(l.props=v,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(B){B&&(B.__=t)}),b=0;b<l._sb.length;b++)l.__h.push(l._sb[b]);l._sb=[],l.__h.length&&s.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(v,l.__s,w),g&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,_,p)})}if(l.context=w,l.props=v,l.__P=e,l.__e=!1,k=M.__r,S=0,g){for(l.state=l.__s,l.__d=!1,k&&k(t),f=l.render(l.props,l.state,l.context),x=0;x<l._sb.length;x++)l.__h.push(l._sb[x]);l._sb=[]}else do l.__d=!1,k&&k(t),f=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++S<25);l.state=l.__s,l.getChildContext!=null&&(r=be(be({},r),l.getChildContext())),g&&!d&&l.getSnapshotBeforeUpdate!=null&&(p=l.getSnapshotBeforeUpdate(h,_)),j=f,f!=null&&f.type===_e&&f.key==null&&(j=Gi(f.props.children)),a=Ki(e,Dt(j)?j:[j],t,n,r,o,i,s,a,u,c),l.base=t.__e,t.__u&=-161,l.__h.length&&s.push(l),y&&(l.__E=l.__=null)}catch(B){if(t.__v=null,u||i!=null)if(B.then){for(t.__u|=u?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;i[i.indexOf(a)]=null,t.__e=a}else{for(N=i.length;N--;)qr(i[N]);fr(t)}else t.__e=n.__e,t.__k=n.__k,B.then||fr(t);M.__e(B,t,n)}else i==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):a=t.__e=Ha(n.__e,t,n,r,o,i,s,u,c);return(f=M.diffed)&&f(t),128&t.__u?void 0:a}function fr(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(fr)}function Yi(e,t,n){for(var r=0;r<n.length;r++)Wr(n[r],n[++r],n[++r]);M.__c&&M.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){M.__e(i,o.__v)}})}function Gi(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Dt(e)?e.map(Gi):be({},e)}function Ha(e,t,n,r,o,i,s,a,u){var c,f,l,d,h,_,p,y=n.props,v=t.props,g=t.type;if(g=="svg"?o="http://www.w3.org/2000/svg":g=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),i!=null){for(c=0;c<i.length;c++)if((h=i[c])&&"setAttribute"in h==!!g&&(g?h.localName==g:h.nodeType==3)){e=h,i[c]=null;break}}if(e==null){if(g==null)return document.createTextNode(v);e=document.createElementNS(o,g,v.is&&v),a&&(M.__m&&M.__m(t,i),a=!1),i=null}if(g==null)y===v||a&&e.data==v||(e.data=v);else{if(i=i&&It.call(e.childNodes),y=n.props||Mt,!a&&i!=null)for(y={},c=0;c<e.attributes.length;c++)y[(h=e.attributes[c]).name]=h.value;for(c in y)if(h=y[c],c!="children"){if(c=="dangerouslySetInnerHTML")l=h;else if(!(c in v)){if(c=="value"&&"defaultValue"in v||c=="checked"&&"defaultChecked"in v)continue;Gt(e,c,null,h,o)}}for(c in v)h=v[c],c=="children"?d=h:c=="dangerouslySetInnerHTML"?f=h:c=="value"?_=h:c=="checked"?p=h:a&&typeof h!="function"||y[c]===h||Gt(e,c,h,y[c],o);if(f)a||l&&(f.__html==l.__html||f.__html==e.innerHTML)||(e.innerHTML=f.__html),t.__k=[];else if(l&&(e.innerHTML=""),Ki(t.type=="template"?e.content:e,Dt(d)?d:[d],t,n,r,g=="foreignObject"?"http://www.w3.org/1999/xhtml":o,i,s,i?i[0]:n.__k&&ut(n,0),a,u),i!=null)for(c=i.length;c--;)qr(i[c]);a||(c="value",g=="progress"&&_==null?e.removeAttribute("value"):_!=null&&(_!==e[c]||g=="progress"&&!_||g=="option"&&_!=y[c])&&Gt(e,c,_,y[c],o),c="checked",p!=null&&p!=e[c]&&Gt(e,c,p,y[c],o))}return e}function Wr(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(o){M.__e(o,n)}}function Zi(e,t,n){var r,o;if(M.unmount&&M.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||Wr(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){M.__e(i,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Zi(r[o],t,n||typeof e.type!="function");n||qr(e.__e),e.__c=e.__=e.__e=void 0}function Qa(e,t,n){return this.constructor(e,n)}function ct(e,t,n){var r,o,i,s;t==document&&(t=document.documentElement),M.__&&M.__(e,t),o=(r=typeof n=="function")?null:n&&n.__k||t.__k,i=[],s=[],Fr(t,e=(!r&&n||t).__k=O(_e,null,[e]),o||Mt,Mt,t.namespaceURI,!r&&n?[n]:o?null:t.firstChild?It.call(t.childNodes):null,i,!r&&n?n:o?o.__e:t.firstChild,r,s),Yi(i,e,s)}function Xi(e,t){ct(e,t,Xi)}function Ka(e,t,n){var r,o,i,s,a=be({},e.props);for(i in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)i=="key"?r=t[i]:i=="ref"?o=t[i]:a[i]=t[i]===void 0&&s!=null?s[i]:t[i];return arguments.length>2&&(a.children=arguments.length>3?It.call(arguments,2):n),xt(e.type,a,r||e.key,o||e.ref,null)}function xn(e){function t(n){var r,o;return this.getChildContext||(r=new Set,(o={})[t.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(i){this.props.value!=i.value&&r.forEach(function(s){s.__e=!0,lr(s)})},this.sub=function(i){r.add(i);var s=i.componentWillUnmount;i.componentWillUnmount=function(){r&&r.delete(i),s&&s.call(i)}}),n.children}return t.__c="__cC"+Vi++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,r){return n.children(r)}).contextType=t,t}It=Bi.slice,M={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(a){e=a}throw e}},zi=0,pe.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=be({},this.state),typeof e=="function"&&(e=e(be({},n),this.props)),e&&be(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),lr(this))},pe.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),lr(this))},pe.prototype.render=_e,Be=[],qi=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fi=function(e,t){return e.__v.__b-t.__v.__b},yn.__r=0,Wi=/(PointerCapture)$|Capture$/i,zr=0,ur=Eo(!1),cr=Eo(!0),Vi=0;function Ja(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,o,i,s=[],a="",u=e.split("/");for(u[0]||u.shift();o=u.shift();)n=o[0],n==="*"?(s.push(n),a+=o[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=o.indexOf("?",1),i=o.indexOf(".",1),s.push(o.substring(1,~r?r:~i?i:o.length)),a+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~r?"?":"")+"\\"+o.substring(i))):a+="/"+o;return{keys:s,pattern:new RegExp("^"+a+(t?"(?=$|/)":"/?$"),"i")}}var Te,R,Bn,Mo,lt=0,es=[],D=M,Po=D.__b,jo=D.__r,To=D.diffed,Ro=D.__c,Ao=D.unmount,Io=D.__;function et(e,t){D.__h&&D.__h(R,e,lt||t),lt=0;var n=R.__H||(R.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function De(e){return lt=1,Cn(ts,e)}function Cn(e,t,n){var r=et(Te++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):ts(void 0,t),function(a){var u=r.__N?r.__N[0]:r.__[0],c=r.t(u,a);u!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=R,!R.__f)){var o=function(a,u,c){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(d){return!!d.__c});if(f.every(function(d){return!d.__N}))return!i||i.call(this,a,u,c);var l=r.__c.props!==a;return f.forEach(function(d){if(d.__N){var h=d.__[0];d.__=d.__N,d.__N=void 0,h!==d.__[0]&&(l=!0)}}),i&&i.call(this,a,u,c)||l};R.__f=!0;var i=R.shouldComponentUpdate,s=R.componentWillUpdate;R.componentWillUpdate=function(a,u,c){if(this.__e){var f=i;i=void 0,o(a,u,c),i=f}s&&s.call(this,a,u,c)},R.shouldComponentUpdate=o}return r.__N||r.__}function Ne(e,t){var n=et(Te++,3);!D.__s&&Kr(n.__H,t)&&(n.__=e,n.u=t,R.__H.__h.push(n))}function tt(e,t){var n=et(Te++,4);!D.__s&&Kr(n.__H,t)&&(n.__=e,n.u=t,R.__h.push(n))}function Fe(e){return lt=5,Ut(function(){return{current:e}},[])}function Vr(e,t,n){lt=6,tt(function(){if(typeof e=="function"){var r=e(t());return function(){e(null),r&&typeof r=="function"&&r()}}if(e)return e.current=t(),function(){return e.current=null}},n==null?n:n.concat(e))}function Ut(e,t){var n=et(Te++,7);return Kr(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function Br(e,t){return lt=8,Ut(function(){return e},t)}function Lt(e){var t=R.context[e.__c],n=et(Te++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(R)),t.props.value):e.__}function Hr(e,t){D.useDebugValue&&D.useDebugValue(t?t(e):e)}function Ya(e){var t=et(Te++,10),n=De();return t.__=e,R.componentDidCatch||(R.componentDidCatch=function(r,o){t.__&&t.__(r,o),n[1](r)}),[n[0],function(){n[1](void 0)}]}function Qr(){var e=et(Te++,11);if(!e.__){for(var t=R.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function Ga(){for(var e;e=es.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(un),e.__H.__h.forEach(dr),e.__H.__h=[]}catch(t){e.__H.__h=[],D.__e(t,e.__v)}}D.__b=function(e){R=null,Po&&Po(e)},D.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Io&&Io(e,t)},D.__r=function(e){jo&&jo(e),Te=0;var t=(R=e.__c).__H;t&&(Bn===R?(t.__h=[],R.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(un),t.__h.forEach(dr),t.__h=[],Te=0)),Bn=R},D.diffed=function(e){To&&To(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(es.push(t)!==1&&Mo===D.requestAnimationFrame||((Mo=D.requestAnimationFrame)||Za)(Ga)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Bn=R=null},D.__c=function(e,t){t.some(function(n){try{n.__h.forEach(un),n.__h=n.__h.filter(function(r){return!r.__||dr(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],D.__e(r,n.__v)}}),Ro&&Ro(e,t)},D.unmount=function(e){Ao&&Ao(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{un(r)}catch(o){t=o}}),n.__H=void 0,t&&D.__e(t,n.__v))};var Do=typeof requestAnimationFrame=="function";function Za(e){var t,n=function(){clearTimeout(r),Do&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);Do&&(t=requestAnimationFrame(n))}function un(e){var t=R,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),R=t}function dr(e){var t=R;e.__c=e.__(),R=t}function Kr(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function ts(e,t){return typeof t=="function"?t(e):t}function ns(e,t){for(var n in t)e[n]=t[n];return e}function hr(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var r in t)if(r!=="__source"&&e[r]!==t[r])return!0;return!1}function Jr(e,t){var n=t(),r=De({t:{__:n,u:t}}),o=r[0].t,i=r[1];return tt(function(){o.__=n,o.u=t,Hn(o)&&i({t:o})},[e,n,t]),Ne(function(){return Hn(o)&&i({t:o}),e(function(){Hn(o)&&i({t:o})})},[e]),n}function Hn(e){var t,n,r=e.u,o=e.__;try{var i=r();return!((t=o)===(n=i)&&(t!==0||1/t==1/n)||t!=t&&n!=n)}catch{return!0}}function Yr(e){e()}function Gr(e){return e}function Zr(){return[!1,Yr]}var Xr=tt;function gn(e,t){this.props=e,this.context=t}function $n(e,t){function n(o){var i=this.props.ref,s=i==o.ref;return!s&&i&&(i.call?i(null):i.current=null),t?!t(this.props,o)||!s:hr(this.props,o)}function r(o){return this.shouldComponentUpdate=n,O(e,o)}return r.displayName="Memo("+(e.displayName||e.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(gn.prototype=new pe).isPureReactComponent=!0,gn.prototype.shouldComponentUpdate=function(e,t){return hr(this.props,e)||hr(this.state,t)};var Uo=M.__b;M.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Uo&&Uo(e)};var Xa=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function eo(e){function t(n){var r=ns({},n);return delete r.ref,e(r,n.ref||null)}return t.$$typeof=Xa,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Lo=function(e,t){return e==null?null:Pe(Pe(e).map(t))},rs={map:Lo,forEach:Lo,count:function(e){return e?Pe(e).length:0},only:function(e){var t=Pe(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:Pe},eu=M.__e;M.__e=function(e,t,n,r){if(e.then){for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),o.__c(e,t)}eu(e,t,n,r)};var No=M.unmount;function os(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),e.__c.__H=null),(e=ns({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(r){return os(r,t,n)})),e}function is(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(r){return is(r,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function Ct(){this.__u=0,this.o=null,this.__b=null}function ss(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function as(e){var t,n,r;function o(i){if(t||(t=e()).then(function(s){n=s.default||s},function(s){r=s}),r)throw r;if(!n)throw t;return O(n,i)}return o.displayName="Lazy",o.__f=!0,o}function st(){this.i=null,this.l=null}M.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),No&&No(e)},(Ct.prototype=new pe).__c=function(e,t){var n=t.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var o=ss(r.__v),i=!1,s=function(){i||(i=!0,n.__R=null,o?o(a):a())};n.__R=s;var a=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=is(u,u.__c.__P,u.__c.__O)}var c;for(r.setState({__a:r.__b=null});c=r.o.pop();)c.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(s,s)},Ct.prototype.componentWillUnmount=function(){this.o=[]},Ct.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=os(this.__b,n,r.__O=r.__P)}this.__b=null}var o=t.__a&&O(_e,null,e.fallback);return o&&(o.__u&=-33),[O(_e,null,t.__a?null:e.children),o]};var zo=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function tu(e){return this.getChildContext=function(){return e.context},e.children}function nu(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){ct(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var r=t.__v;r!==null&&!r.__m&&r.__!==null;)r=r.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:r.__m},contains:function(){return!0},insertBefore:function(o,i){this.childNodes.push(o),t.h.insertBefore(o,i)},removeChild:function(o){this.childNodes.splice(this.childNodes.indexOf(o)>>>1,1),t.h.removeChild(o)}}}ct(O(tu,{context:t.context},e.__v),t.v)}function us(e,t){var n=O(nu,{__v:e,h:t});return n.containerInfo=t,n}(st.prototype=new pe).__a=function(e){var t=this,n=ss(t.__v),r=t.l.get(e);return r[0]++,function(o){var i=function(){t.props.revealOrder?(r.push(o),zo(t,e,r)):o()};n?n(i):i()}},st.prototype.render=function(e){this.i=null,this.l=new Map;var t=Pe(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},st.prototype.componentDidUpdate=st.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){zo(e,n,t)})};var cs=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ru=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ou=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,iu=/[A-Z0-9]/g,su=typeof document<"u",au=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function ls(e,t,n){return t.__k==null&&(t.textContent=""),ct(e,t),typeof n=="function"&&n(),e?e.__c:null}function fs(e,t,n){return Xi(e,t),typeof n=="function"&&n(),e?e.__c:null}pe.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(pe.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var qo=M.event;function uu(){}function cu(){return this.cancelBubble}function lu(){return this.defaultPrevented}M.event=function(e){return qo&&(e=qo(e)),e.persist=uu,e.isPropagationStopped=cu,e.isDefaultPrevented=lu,e.nativeEvent=e};var to,fu={enumerable:!1,configurable:!0,get:function(){return this.class}},Fo=M.vnode;M.vnode=function(e){typeof e.type=="string"&&function(t){var n=t.props,r=t.type,o={},i=r.indexOf("-")===-1;for(var s in n){var a=n[s];if(!(s==="value"&&"defaultValue"in n&&a==null||su&&s==="children"&&r==="noscript"||s==="class"||s==="className")){var u=s.toLowerCase();s==="defaultValue"&&"value"in n&&n.value==null?s="value":s==="download"&&a===!0?a="":u==="translate"&&a==="no"?a=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?s="ondblclick":u!=="onchange"||r!=="input"&&r!=="textarea"||au(n.type)?u==="onfocus"?s="onfocusin":u==="onblur"?s="onfocusout":ou.test(s)&&(s=u):u=s="oninput":i&&ru.test(s)?s=s.replace(iu,"-$&").toLowerCase():a===null&&(a=void 0),u==="oninput"&&o[s=u]&&(s="oninputCapture"),o[s]=a}}r=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=Pe(n.children).forEach(function(c){c.props.selected=o.value.indexOf(c.props.value)!=-1})),r=="select"&&o.defaultValue!=null&&(o.value=Pe(n.children).forEach(function(c){c.props.selected=o.multiple?o.defaultValue.indexOf(c.props.value)!=-1:o.defaultValue==c.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",fu)):(n.className&&!n.class||n.class&&n.className)&&(o.class=o.className=n.className),t.props=o}(e),e.$$typeof=cs,Fo&&Fo(e)};var Wo=M.__r;M.__r=function(e){Wo&&Wo(e),to=e.__c};var Vo=M.diffed;M.diffed=function(e){Vo&&Vo(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value),to=null};var ds={ReactCurrentDispatcher:{current:{readContext:function(e){return to.__n[e.__c].props.value},useCallback:Br,useContext:Lt,useDebugValue:Hr,useDeferredValue:Gr,useEffect:Ne,useId:Qr,useImperativeHandle:Vr,useInsertionEffect:Xr,useLayoutEffect:tt,useMemo:Ut,useReducer:Cn,useRef:Fe,useState:De,useSyncExternalStore:Jr,useTransition:Zr}}},du="18.3.1";function hs(e){return O.bind(null,e)}function nt(e){return!!e&&e.$$typeof===cs}function ps(e){return nt(e)&&e.type===_e}function _s(e){return!!e&&!!e.displayName&&(typeof e.displayName=="string"||e.displayName instanceof String)&&e.displayName.startsWith("Memo(")}function En(e){return nt(e)?Ka.apply(null,arguments):e}function vs(e){return!!e.__k&&(ct(null,e),!0)}function ys(e){return e&&(e.base||e.nodeType===1&&e)||null}var gs=function(e,t){return e(t)},ms=function(e,t){return e(t)},bs=_e,ws=nt,me={useState:De,useId:Qr,useReducer:Cn,useEffect:Ne,useLayoutEffect:tt,useInsertionEffect:Xr,useTransition:Zr,useDeferredValue:Gr,useSyncExternalStore:Jr,startTransition:Yr,useRef:Fe,useImperativeHandle:Vr,useMemo:Ut,useCallback:Br,useContext:Lt,useDebugValue:Hr,version:"18.3.1",Children:rs,render:ls,hydrate:fs,unmountComponentAtNode:vs,createPortal:us,createElement:O,createContext:xn,createFactory:hs,cloneElement:En,createRef:Hi,Fragment:_e,isValidElement:nt,isElement:ws,isFragment:ps,isMemo:_s,findDOMNode:ys,Component:pe,PureComponent:gn,memo:$n,forwardRef:eo,flushSync:ms,unstable_batchedUpdates:gs,StrictMode:bs,Suspense:Ct,SuspenseList:st,lazy:as,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:ds};const Ss=Object.freeze(Object.defineProperty({__proto__:null,Children:rs,Component:pe,Fragment:_e,PureComponent:gn,StrictMode:bs,Suspense:Ct,SuspenseList:st,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:ds,cloneElement:En,createContext:xn,createElement:O,createFactory:hs,createPortal:us,createRef:Hi,default:me,findDOMNode:ys,flushSync:ms,forwardRef:eo,hydrate:fs,isElement:ws,isFragment:ps,isMemo:_s,isValidElement:nt,lazy:as,memo:$n,render:ls,startTransition:Yr,unmountComponentAtNode:vs,unstable_batchedUpdates:gs,useCallback:Br,useContext:Lt,useDebugValue:Hr,useDeferredValue:Gr,useEffect:Ne,useErrorBoundary:Ya,useId:Qr,useImperativeHandle:Vr,useInsertionEffect:Xr,useLayoutEffect:tt,useMemo:Ut,useReducer:Cn,useRef:Fe,useState:De,useSyncExternalStore:Jr,useTransition:Zr,version:du},Symbol.toStringTag,{value:"Module"}));function Os(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function hu(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var Qn={exports:{}},Kn={};const ks=hu(Ss);/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bo;function pu(){if(Bo)return Kn;Bo=1;var e=ks;function t(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,o=e.useEffect,i=e.useLayoutEffect,s=e.useDebugValue;function a(l,d){var h=d(),_=r({inst:{value:h,getSnapshot:d}}),p=_[0].inst,y=_[1];return i(function(){p.value=h,p.getSnapshot=d,u(p)&&y({inst:p})},[l,h,d]),o(function(){return u(p)&&y({inst:p}),l(function(){u(p)&&y({inst:p})})},[l]),s(h),h}function u(l){var d=l.getSnapshot;l=l.value;try{var h=d();return!n(l,h)}catch{return!0}}function c(l,d){return d()}var f=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Kn.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:f,Kn}var Ho;function xs(){return Ho||(Ho=1,Qn.exports=pu()),Qn.exports}var Cs=xs();const _u=Os(Cs),vu=Ss.useInsertionEffect,yu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gu=yu?tt:Ne,mu=vu||gu,$s=e=>{const t=Fe([e,(...n)=>t[0](...n)]).current;return mu(()=>{t[0]=e}),t[1]},bu="popstate",no="pushState",ro="replaceState",wu="hashchange",Qo=[bu,no,ro,wu],Su=e=>{for(const t of Qo)addEventListener(t,e);return()=>{for(const t of Qo)removeEventListener(t,e)}},Es=(e,t)=>Cs.useSyncExternalStore(Su,e,t),Ou=()=>location.search,ku=({ssrSearch:e=""}={})=>Es(Ou,()=>e),Ko=()=>location.pathname,xu=({ssrPath:e}={})=>Es(Ko,e?()=>e:Ko),Cu=(e,{replace:t=!1,state:n=null}={})=>history[t?ro:no](n,"",e),$u=(e={})=>[xu(e),Cu],Jo=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Jo]>"u"){for(const e of[no,ro]){const t=history[e];history[e]=function(){const n=t.apply(this,arguments),r=new Event(e);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,Jo,{value:!0})}const Eu=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",Ms=(e="")=>e==="/"?"":e,Mu=(e,t)=>e[0]==="~"?e.slice(1):Ms(t)+e,Pu=(e="",t)=>Eu(Yo(Ms(e)),Yo(t)),Yo=e=>{try{return decodeURI(e)}catch{return e}},Ps={hook:$u,searchHook:ku,parser:Ja,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},js=xn(Ps),Mn=()=>Lt(js),Ts={},Rs=xn(Ts),ju=()=>Lt(Rs),oo=e=>{const[t,n]=e.hook(e);return[Pu(e.base,t),$s((r,o)=>n(Mu(r,e.base),o))]},As=(e,t,n,r)=>{const{pattern:o,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",r),s=o.exec(n)||[],[a,...u]=s;return a!==void 0?[!0,(()=>{const c=i!==!1?Object.fromEntries(i.map((l,d)=>[l,u[d]])):s.groups;let f={...u};return c&&Object.assign(f,c),f})(),...r?[a]:[]]:[!1,null]},Tu=({children:e,...t})=>{var f,l;const n=Mn(),r=t.hook?Ps:n;let o=r;const[i,s]=((f=t.ssrPath)==null?void 0:f.split("?"))??[];s&&(t.ssrSearch=s,t.ssrPath=i),t.hrefs=t.hrefs??((l=t.hook)==null?void 0:l.hrefs);let a=Fe({}),u=a.current,c=u;for(let d in r){const h=d==="base"?r[d]+(t[d]||""):t[d]||r[d];u===c&&h!==c[d]&&(a.current=c={...c}),c[d]=h,(h!==r[d]||h!==o[d])&&(o=c)}return O(js.Provider,{value:o,children:e})},Go=({children:e,component:t},n)=>t?O(t,{params:n}):typeof e=="function"?e(n):e,Ru=e=>{let t=Fe(Ts);const n=t.current;return t.current=Object.keys(e).length!==Object.keys(n).length||Object.entries(e).some(([r,o])=>o!==n[r])?e:n},Zo=({path:e,nest:t,match:n,...r})=>{const o=Mn(),[i]=oo(o),[s,a,u]=n??As(o.parser,e,i,t),c=Ru({...ju(),...a});if(!s)return null;const f=u?O(Tu,{base:u},Go(r,c)):Go(r,c);return O(Rs.Provider,{value:c,children:f})},Au=eo((e,t)=>{const n=Mn(),[r,o]=oo(n),{to:i="",href:s=i,onClick:a,asChild:u,children:c,className:f,replace:l,state:d,...h}=e,_=$s(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(a==null||a(y),y.defaultPrevented||(y.preventDefault(),o(s,e)))}),p=n.hrefs(s[0]==="~"?s.slice(1):n.base+s,n);return u&&nt(c)?En(c,{onClick:_,href:p}):O("a",{...h,onClick:_,href:p,className:f!=null&&f.call?f(r===s):f,children:c,ref:t})}),Is=e=>Array.isArray(e)?e.flatMap(t=>Is(t&&t.type===_e?t.props.children:t)):[e],Iu=({children:e,location:t})=>{const n=Mn(),[r]=oo(n);for(const o of Is(e)){let i=0;if(nt(o)&&(i=As(n.parser,o.props.path,t||r,o.props.nest))[0])return En(o,{match:i})}return null};function Pn(e,t){for(const n in e)t(e[n],n)}function de(e,t){e.forEach(t)}function Q(e,t,n){if(!e)throw Error(`${n?n+": ":""}${t}`)}function ze({node:e=[],from:t,source:n,parent:r=t||n,to:o,target:i,child:s=o||i,scope:a={},meta:u={},family:c={type:"regular"},regional:f}={}){const l=en(r),d=en(c.links),h=en(c.owners),_=[];de(e,y=>y&&Le(_,y));const p={id:Qu(),seq:_,next:en(s),meta:u,scope:a,family:{triggers:l.length,type:c.type||"crosslink",links:d,owners:h}};return de(d,y=>Le(jn(y),p)),de(h,y=>Le(Tn(y),p)),de(l,y=>Le(y.next,p)),p}function Ds(e,t,n){let r,o=Me,i=null,s=I;if(e.target&&(t=e.params,n=e.defer,r=e.meta,o="page"in e?e.page:o,e.stack&&(i=e.stack),s=Zt(e)||s,e=e.target),s&&I&&s!==I&&(I=null),Array.isArray(e))for(let _=0;_<e.length;_++)Ve("pure",o,ae(e[_]),i,t[_],s,r);else Ve("pure",o,ae(e),i,t,s,r);if(n&&!tn)return;const a={isRoot:tn,currentPage:Me,scope:I,isWatch:Zn,isPure:fn};let u,c,f,l,d,h;tn=0;e:for(;l=tc();){const{idx:_,stack:p,type:y}=l;f=p.node,Me=d=p.page,I=Zt(p),d?h=d.reg:I&&(h=I.reg);const v=!!d,g=!!I,m={fail:0,scope:f.scope};u=c=0;for(let w=_;w<f.seq.length&&!u;w++){const b=f.seq[w];if(b.order){const{priority:k,barrierID:S}=b.order,x=S?d?`${d.fullID}_${S}`:S:0;if(w!==_||y!==k){S?Gn.has(x)||(Gn.add(x),gr(w,p,k,S)):gr(w,p,k,0);continue e}S&&Gn.delete(x)}switch(b.type){case"mov":{const S=b.data;let x;switch(S.from){case"stack":x=cn(p);break;case"a":case"b":x=p[S.from];break;case"value":x=S.store;break;case"store":if(h&&!h[S.store.id])if(v){const j=Ks(d,S.store.id);p.page=d=j,j?h=j.reg:g?(ht(I,S.store,0,1,S.softRead),h=I.reg):h=void 0}else g&&ht(I,S.store,0,1,S.softRead);x=Qs(h&&h[S.store.id]||S.store)}switch(S.to){case"stack":p.value=x;break;case"a":case"b":p[S.to]=x;break;case"store":nc(d,I,S.target,0).current=x}break}case"compute":const k=b.data;if(k.fn){Zn=f.meta.op==="watch",fn=k.pure;const S=k.safe?(0,k.fn)(cn(p),m.scope,p):oc(m,k.fn,p);k.filter?c=!S:p.value=S,Zn=a.isWatch,fn=a.isPure}}u=m.fail||c}if(!u){const w=cn(p),b=Zt(p);if(de(f.next,k=>{Ve("child",d,k,p,w,b)}),b){f.meta.needFxCounter&&Ve("child",d,b.fxCount,p,w,b),f.meta.storeChange&&Ve("child",d,b.storeChange,p,w,b),f.meta.warnSerialize&&Ve("child",d,b.warnSerializeNode,p,w,b);const k=b.additionalLinks[f.id];k&&de(k,S=>{Ve("child",d,S,p,w,b)})}}}tn=a.isRoot,Me=a.currentPage,I=Zt(a)}function Du(e,t="combine"){let n=t+"(",r="",o=0;return Pn(e,i=>{o<25&&(i!=null&&(n+=r,n+=vt(i)?Ns(i).fullName:i.toString()),o+=1,r=", ")}),n+")"}function Uu(e,t){let n,r;const o=e;if(t){const i=Ns(t);e.length===0?(n=i.path,r=i.fullName):(n=i.path.concat([e]),r=i.fullName.length===0?e:i.fullName+"/"+e)}else n=e.length===0?[]:[e],r=e;return{shortName:o,fullName:r,path:n}}function Nt(e,t){if(!t||!t.name&&!t.named&&!t.loc)return e;let n=`[${e}]`;const r=t.named||t.name;r&&(n+=` unit '${r}'`);const o=t.loc;return!r&&o&&(n+=` (${o.file}:${o.line}:${o.column})`),n}function Us(e,t){const n=t?e:e[0];Bs(n);let r=n.or;const o=n.and;if(o){const i=o[0];if(Ae(i)&&"and"in i){const s=Us(o,t);e=s[0],r={...r,...s[1]}}else e=o}return[e,r]}function pr(e){const t=()=>e();return t.unsubscribe=()=>e(),t}function Je(e,...t){}function G(e,t){const n=Rt({or:t,and:typeof e=="string"?{name:e}:e}),r=Nt("event",n),o=(a,...u)=>(Q(!He(o,"derived"),"call of derived event is not supported, use createEvent instead",r),Q(!fn,"unit call from pure function is not supported, use operators like sample instead",r),Me?((c,f,l,d)=>{const h=Me;ri(null);const p=c.create(l,d);return ri(h),p})(o,i,a,u):o.create(a,u)),i=Ju(),s=Object.assign(o,{graphite:ze({meta:Ys(n.actualOp||"event",o,n,co(G)),regional:1}),create:a=>(Ds({target:o,params:a,scope:I}),a),watch:a=>Js(o,a),map:a=>Xn(o,ft,a,[Qe()]),filter:a=>Xn(o,"filter",a.fn?a:a.fn,[Qe(Rn,1)]),filterMap:a=>Xn(o,"filterMap",a,[Qe(),Tt(u=>!Ye(u),1)]),prepend(a){Q(o.targetable,".prepend of derived event is not supported, call source event instead",r);const u=G("* → "+o.shortName,{parent:Pt(o)});return Je("eventPrepend",ae(u)),qt(u,o,[Qe()],"prepend",a),sc(o,u),u}});return n!=null&&n.domain&&n.domain.hooks.event(s),Ee(s,"id",s.graphite.id),Ws(s.graphite),s}function Xo(e,t,n,r,o){return Gu(n,`${o} ${t}`,"first argument"),Q(We(r),"second argument should be a function",o),bn(!He(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`,o),de(Array.isArray(n)?n:[n],i=>{e.off(i),Gs(i,e,"on",Xu,r)}),e}function ve(e,t){const n=Rt(t),r=vr(e),o=Nt("store",n),i=G({named:"updates",derived:1});Je("storeBase",r);const s=r.id,a="skipVoid"in n,u=a&&!n.skipVoid;bn(!(a&&n.skipVoid),"{skipVoid: true}","updateFilter",o);const c={updates:i,defaultState:e,stateRef:r,getState(){let v,g=r;if(Me){let m=Me;for(;m&&!m.reg[s];)m=Pt(m);m&&(v=m)}return!v&&I&&(ht(I,r,1),v=I),v&&(g=v.reg[s]),Qs(g)},setState:v=>Ds({target:c,params:v,defer:1,scope:I}),reset:(...v)=>(Q(c.targetable,".reset of derived store is not supported",o),de(v,g=>Xo(c,".reset",g,()=>c.defaultState,o)),c),on:(v,g)=>(Q(c.targetable,".on of derived store is not supported",o),Xo(c,".on",v,g,o)),off(v){const g=ae(v).id,m=ae(c).family.links.find(w=>w.meta.onTrigger===g);return m&&wn(m),c},map(v,g){let m,w;Ae(v)&&(m=v,v=v.fn);const b=c.getState(),k=Ye(b);(!k||k&&u)&&(w=v(b));const S=ve(w,{name:`${c.shortName} → *`,derived:1,...g,and:m}),x=Gs(c,S,ft,Rn,v);return yr(dt(S),{type:ft,fn:v,from:r}),dt(S).noInit=1,Je("storeMap",r,x),S},watch(v,g){if(bn(!g,"watch second argument","sample",o),!g||!vt(v)){const m=Js(c,v);return Je("storeWatch",r,v)||v(c.getState()),m}return Q(We(g),"second argument should be a function",o),v.watch(m=>g(c.getState(),m))}},f=Ys("store",c,n,co(ve)),l=c.defaultConfig.updateFilter;c.graphite=ze({scope:{state:r,fn:l},node:[Tt((v,g,m)=>(m.scope&&!m.scope.reg[r.id]&&(m.b=1),v)),_r(r),Tt((v,g,{a:m,b:w})=>{const b=Ye(v);return b&&!a&&Bu(`${o}: ${hn}`,He(c,"unitTrace")),(b&&u||!b)&&(v!==m||w)},1),l&&Qe(Zu,1),$e({from:"stack",target:r})],child:i,meta:{...f,defaultState:e,stateRef:r},regional:1}),Ee(c,"id",c.graphite.id),Ee(c,"rootStateRefId",s);const d=He(c,"serialize"),h=He(c,"derived"),_=d==="ignore",p=He(c,"sid");p&&(Ee(c,"storeChange",1),r.sid=p),p||_||h||Ee(c,"warnSerialize",1);const y=Ye(e);return Q(h||!y||y&&u,hn,o),h&&y&&!a&&console.error(`${o}: ${hn}`),Vs(c,[i]),n!=null&&n.domain&&n.domain.hooks.store(c),h||(c.reinit=G({named:"reinit"}),c.reset(c.reinit)),r.meta=c.graphite.meta,Ws(c.graphite),c}function Ls(...e){let t,n,r;[e,r]=Us(e);const o=Nt("combine",r),i=e[e.length-1],s=e.length>1&&!Re(i)&&Ae(i),a=s&&i,u=s?e[e.length-2]:i;let c,f,l;if(We(u)?(n=e.slice(0,s?-2:-1),t=u):n=e,n.length===1){const d=n[0];Re(d)||(c=d,f=1)}if(!f&&(c=n,t)){l=1;const d=t;t=h=>d(...h)}return Q(Ae(c),`${o}: shape should be an object`),uc(Array.isArray(c),!l,c,co(Ls),r,t,a)}function Lu(e,t,n){const r=Nt("restore",n);if(Q(!Re(e),"restore($store) is not supported",r),zs(e)||mn(e)){const i=Pt(e),s=ve(t,{parent:i,name:e.shortName,and:n});return qt(mn(e)?e.doneData:e,s),i&&i.hooks.store(s),s}const o=Array.isArray(e)?[]:{};return Pn(e,(i,s)=>o[s]=Re(i)?i:ve(i,{name:s})),o}function Nu(e,{scope:t,safe:n}={}){Q(t||I||n,"scopeBind: scope not found");const r=t||I;return(...o)=>{function i(){ni(u)}let s,a=0;const u=I;ni(r);try{s=e(...o)}catch(c){s=c,a=1}if(i(),a)throw s;return s instanceof Promise&&s.then(i,i),s}}function zu({unit:e,fn:t,scope:n,batch:r}){const o=[ln.run({fn:s=>t(s)})];o.unshift(ln.compute({priority:"sampler",batch:1})),Re(e)&&o.unshift(ln.mov({store:e.stateRef,to:"stack"}));const i=Array.isArray(e)?e:[e];if(n){const s=[],a=n.additionalLinks;return i.forEach(u=>{const c=a[u.graphite.id]||[];a[u.graphite.id]=c;const f=ze({node:qu(o,u),meta:{watchOp:u.kind}});c.push(f),s.push(()=>{const l=c.indexOf(f);l!==-1&&c.splice(l,1),wn(f)})}),pr(()=>{s.forEach(u=>u())})}{const s=ze({node:o,parent:i,family:{owners:i}});return pr(()=>{wn(s)})}}function qu(e,t){return Re(t)?[ln.mov({store:t.stateRef,to:"stack"}),...e]:e}const Fu=typeof Symbol<"u"&&Symbol.observable||"@@observable",ft="map",ae=e=>e.graphite||e,jn=e=>e.family.owners,Tn=e=>e.family.links,dt=e=>e.stateRef,cn=e=>e.value,Pt=e=>e.parent,Zt=e=>e.scope,He=(e,t)=>ae(e).meta[t],Ee=(e,t,n)=>ae(e).meta[t]=n,Ns=e=>e.compositeName,vt=e=>(We(e)||Ae(e))&&"kind"in e,zt=e=>t=>vt(t)&&t.kind===e,Re=zt("store"),zs=zt("event"),mn=zt("effect"),Wu=e=>vt(e)&&!!e.targetable,qs=zt("domain"),Vu=zt("scope");var Xt={__proto__:null,unit:vt,store:Re,event:zs,effect:mn,targetable:Wu,domain:qs,scope:Vu,attached:e=>mn(e)&&He(e,"attached")==1};const Jn=(e,t)=>e.includes(t),Yn=(e,t)=>{const n=e.indexOf(t);n!==-1&&e.splice(n,1)},Le=(e,t)=>e.push(t),bn=(e,t,n,r)=>!e&&console.error(`${r?r+": ":""}${t} is deprecated${n?`, use ${n} instead`:""}`),Bu=(e,t)=>{const n=Error(e);n.stack=t,console.error(n)},io=()=>{let e=0;return()=>""+ ++e},Hu=io(),Fs=io(),Qu=io();let Ku=null;const Ws=e=>{},Ju=()=>Ku,Yu=e=>e,Vs=(e,t)=>{const n=ae(e);de(t,r=>{const o=ae(r);n.family.type!=="domain"&&(o.family.type="crosslink"),Le(jn(o),n),Le(Tn(n),o)})},en=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(ae),Ae=e=>typeof e=="object"&&e!==null,We=e=>typeof e=="function",Ye=e=>e===void 0,Bs=e=>Q(Ae(e)||We(e),"expect first argument be an object"),ei=(e,t,n,r)=>Q(!(!Ae(e)&&!We(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${n} to be a unit (store, event or effect)${r}`),Gu=(e,t,n)=>{Array.isArray(e)?de(e,(r,o)=>ei(r,t,`${o} item of ${n}`,"")):ei(e,t,n," or array of units")},Zu=(e,{fn:t},{a:n})=>t(e,n),Xu=(e,{fn:t},{a:n})=>t(n,e),Rn=(e,{fn:t})=>t(e),Hs=(e,t,n,r)=>{const o={id:Fs(),type:e,data:t};return n&&(o.order={priority:n},r&&(o.order.barrierID=++ec)),o};let ec=0;const $e=({from:e="store",store:t,target:n,to:r=n?"store":"stack",batch:o,priority:i})=>Hs("mov",{from:e,store:t,to:r,target:n},i,o),jt=({fn:e,batch:t,priority:n,safe:r=0,filter:o=0,pure:i=0})=>Hs("compute",{fn:e,safe:r,filter:o,pure:i},n,t),so=({fn:e})=>jt({fn:e,priority:"effect"}),Tt=(e,t,n)=>jt({fn:e,safe:1,filter:t,priority:n}),_r=(e,t,n)=>$e({store:e,to:t?"stack":"a",priority:n&&"sampler",batch:1}),Qe=(e=Rn,t)=>jt({fn:e,pure:1,filter:t}),ln={mov:$e,compute:jt,filter:({fn:e,pure:t})=>jt({fn:e,filter:1,pure:t}),run:so},vr=e=>({id:Fs(),current:e,initial:e}),Qs=({current:e})=>e,yr=(e,t)=>{e.before||(e.before=[]),Le(e.before,t)};let at=null;const ao=(e,t)=>{if(!e)return t;if(!t)return e;let n;return(e.v.type===t.v.type&&e.v.id>t.v.id||mr(e.v.type)>mr(t.v.type))&&(n=e,e=t,t=n),n=ao(e.r,t),e.r=e.l,e.l=n,e},uo=[];let ti=0;for(;ti<6;)Le(uo,{first:null,last:null,size:0}),ti+=1;const tc=()=>{for(let e=0;e<6;e++){const t=uo[e];if(t.size>0){if(e===3||e===4){t.size-=1;const r=at.v;return at=ao(at.l,at.r),r}t.size===1&&(t.last=null);const n=t.first;return t.first=n.r,t.size-=1,n.v}}},Ve=(e,t,n,r,o,i,s)=>gr(0,{a:null,b:null,node:n,parent:r,value:o,page:t,scope:i,meta:s},e,0),gr=(e,t,n,r)=>{const o=mr(n),i=uo[o],s={v:{idx:e,stack:t,type:n,id:r},l:null,r:null};o===3||o===4?at=ao(at,s):(i.size===0?i.first=s:i.last.r=s,i.last=s),i.size+=1},mr=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},Gn=new Set;let I,tn=1,Zn=0,fn=0,Me=null;const ni=e=>{I=e},ri=e=>{Me=e},Ks=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=e.parent;if(e)return e}return null},nc=(e,t,n,r)=>{const o=Ks(e,n.id);return o?o.reg[n.id]:t?(ht(t,n,r),t.reg[n.id]):n},rc=e=>e,ht=(e,t,n,r,o)=>{const i=e.reg;if(i[t.id])return;const s=t.sid,a={id:t.id,current:t.initial,meta:t.meta};if(a.id in e.values.idMap)a.current=e.values.idMap[a.id];else if(s&&s in e.values.sidMap&&!(s in e.sidIdMap)){var u;const c=t==null||(u=t.meta)===null||u===void 0?void 0:u.serialize;a.current=(e.fromSerialize&&c!=="ignore"&&(c==null?void 0:c.read)||rc)(e.values.sidMap[s])}else if(t.before&&!o){let c=0;const f=n||!t.noInit||r;de(t.before,l=>{switch(l.type){case"map":{const d=l.from;if((d||l.fn)&&(d&&ht(e,d,n,r),f)){const h=d&&i[d.id].current;a.current=l.fn?l.fn(h):h}break}case"field":ht(e,l.from,n,r),c||(c=1,a.current=Array.isArray(a.current)?[...a.current]:{...a.current}),f&&(a.current[l.field]=i[i[l.from.id].id].current)}})}s&&(e.sidIdMap[s]=t.id),i[t.id]=a},oc=(e,t,n)=>{try{return t(cn(n),e.scope,n)}catch(r){console.error(r),e.fail=1,e.failReason=r}},Rt=(e,t={})=>(Ae(e)&&(Rt(e.or,t),Pn(e,(n,r)=>{Ye(n)||r==="or"||r==="and"||(t[r]=n)}),Rt(e.and,t)),t),oi=(e,t)=>{Yn(e.next,t),Yn(jn(e),t),Yn(Tn(e),t)},ii=["on","reset","sample","split","merge","guard","forward"],dn=(e,t,n,r,o)=>{let i;e.next.length=0,e.seq.length=0,e.scope=null;let s=Tn(e);const{stateRef:a,defaultShape:u,isRegion:c,op:f}=e.meta;if(a&&(a.before=[],e.meta.stateRef=null),u)for(const d in u)u[d]=null;const l=c?e:r;if(s.length>0){const d=Jn(ii,f),h=!c&&!o,_=h&&n&&!d;for(;i=s.pop();){const p=Jn(i.next,e);oi(i,e),c&&dn(i,0,0,e,1),p||(i.family.triggers-=1),(t||_||h&&i.family.type==="crosslink"&&!d||o&&Jn(ii,i.meta.op)&&(p&&i.next.length===0||!p&&i.family.triggers<=0))&&dn(i,t,n&&i.meta.op!=="on",l,o)}}for(s=jn(e);i=s.pop();)oi(i,e),n&&i.family.type==="crosslink"&&dn(i,t,i.meta.op!=="on",l,o)},nn=e=>e.clear(),wn=(e,{deep:t}={})=>{let n=0;if(e.ownerSet&&e.ownerSet.delete(e),qs(e)){n=1;const r=e.history;nn(r.events),nn(r.effects),nn(r.stores),nn(r.domains)}dn(ae(e),!!t,n,null,0)},ic=e=>pr(()=>wn(e)),qt=(e,t,n,r,o)=>ze({node:n,parent:e,child:t,scope:{fn:o},meta:{op:r},family:{owners:[e,t],links:t},regional:1}),Js=(e,t)=>(Q(We(t),".watch argument should be a function"),ic(ze({scope:{fn:t},node:[so({fn:Rn})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),sc=(e,t,n="event")=>{Pt(e)&&Pt(e).hooks[n](t)},ac=(e,t)=>Ee(e,"unitTrace",t),co=e=>{const t=Error("unit trace");return Error.captureStackTrace&&Error.captureStackTrace(t,e),t.stack},Ys=(e,t,n,r)=>{const o=Rt(n),i=e==="domain",s=Hu(),{sid:a=null,named:u=null,domain:c=null,parent:f=c}=o,l=u||o.name||(i?"":s),d=Uu(l,f),h={op:t.kind=e,name:t.shortName=l,sid:t.sid=Yu(a),named:u,unitId:t.id=s,serialize:o.serialize,derived:o.derived,config:o,unitTrace:r};return t.targetable=!o.derived,t.parent=f,t.compositeName=d,t.defaultConfig=o,t.getType=()=>(bn(0,"getType","compositeName.fullName"),d.fullName),!i&&(t.subscribe=_=>(Bs(_),t.watch(We(_)?_:p=>_.next&&_.next(p))),t[Fu]=()=>t),h},Xn=(e,t,n,r)=>{let o;Ae(n)&&(o=n,n=n.fn);const i=G({name:`${e.shortName} → *`,derived:1,and:o});return qt(e,i,r,t,n),i},hn="undefined is used to skip updates. To allow undefined as a value provide explicit { skipVoid: false } option",Gs=(e,t,n,r,o)=>{const i=dt(t),s=$e({store:i,to:"a",priority:"read"});n===ft&&(s.data.softRead=1);const a=[s,Qe(r)];Je("storeOnMap",i,a,Re(e)&&dt(e));const u=qt(e,t,a,n,o);return n!==ft&&Ee(u,"onTrigger",ae(e).id),u},uc=(e,t,n,r,o,i,s)=>{const a=Nt("combine",o),u=e?g=>[...g]:g=>({...g}),c=e?[]:{},f=u(c),l=vr(f),d=vr(1);l.type=e?"list":"shape",l.noInit=1,Je("combineBase",l,d);const h=ve(f,{name:Du(n),derived:1,...s,and:o});ac(h,r);const _=dt(h);_.noInit=1,Ee(h,"isCombine",1),Vs(h,[ze({meta:{stateRef:l}})]);const p=_r(l);p.order={priority:"barrier"};const y=$e({store:_,to:"b",priority:"read"});y.data.softRead=1;const v=[Tt((g,m,w)=>(w.scope&&!w.scope.reg[l.id]&&(w.c=1),g)),p,$e({store:d,to:"b"}),Tt((g,{key:m},w)=>{if(w.c||g!==w.a[m])return t&&w.b&&(w.a=u(w.a)),w.a[m]=g,1},1),$e({from:"a",target:l}),$e({from:"value",store:0,target:d}),$e({from:"value",store:1,target:d,priority:"barrier",batch:1}),_r(l,1,1),i&&Qe(),y];if(Pn(n,(g,m)=>{if(!Re(g))return Q(!vt(g)&&!Ye(g),`combine expects a store in a field ${m}`,a),void(f[m]=c[m]=g);c[m]=g.defaultState,f[m]=g.getState();const w=qt(g,h,v,"combine",i);w.scope.key=m;const b=dt(g);yr(l,{type:"field",field:m,from:b}),Je("combineField",b,w)}),h.defaultShape=n,Ee(h,"defaultShape",n),yr(_,{type:ft,from:l,fn:i}),i){const g=i(f);!Ye(g)||s&&"skipVoid"in s||console.error(`${a}: ${hn}`),_.current=g,_.initial=g,h.defaultState=g}else h.defaultState=c;return h};ze({node:[so({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}});var er={exports:{}},tr={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var si;function cc(){if(si)return tr;si=1;var e=ks,t=xs();function n(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var r=typeof Object.is=="function"?Object.is:n,o=t.useSyncExternalStore,i=e.useRef,s=e.useEffect,a=e.useMemo,u=e.useDebugValue;return tr.useSyncExternalStoreWithSelector=function(c,f,l,d,h){var _=i(null);if(_.current===null){var p={hasValue:!1,value:null};_.current=p}else p=_.current;_=a(function(){function v(k){if(!g){if(g=!0,m=k,k=d(k),h!==void 0&&p.hasValue){var S=p.value;if(h(S,k))return w=S}return w=k}if(S=w,r(m,k))return S;var x=d(k);return h!==void 0&&h(S,x)?(m=k,S):(m=k,w=x)}var g=!1,m,w,b=l===void 0?null:l;return[function(){return v(f())},b===null?void 0:function(){return v(b())}]},[f,l,d,h]);var y=o(c,_[0],_[1]);return s(function(){p.hasValue=!0,p.value=y},[y]),u(y),y},tr}var ai;function lc(){return ai||(ai=1,er.exports=cc()),er.exports}var fc=lc();const dc=Os(fc);function hc(e,t){const n=Xt.unit(e);let r={};n?r={unit:e}:"@@unitShape"in e?typeof e["@@unitShape"]=="function"?r=e["@@unitShape"]():ui("expect @@unitShape to be a function"):r=e;const o=Array.isArray(r),i=me.useRef({stale:1,justSubscribed:0,scope:t}),[s,a,u,c,f]=me.useMemo(()=>{i.current.stale=1;const _=Array.isArray(r)?[]:{},p=[],y=[],v=[],g=[];for(const m in r){if(!{}.hasOwnProperty.call(r,m))continue;const w=r[m];Xt.unit(w)||ui(`expect useUnit ${n?"argument":`value in key "${m}"`} to be a unit`),Xt.event(w)||Xt.effect(w)?(_[m]=t?Nu(w,{scope:t}):w,v.push(m),g.push(w)):(_[m]=null,p.push(m),y.push(w))}return[_,p,y,v,g]},[i,t,...Object.keys(r),...Object.values(r)]),l=me.useRef({value:s,storeKeys:a,eventKeys:c,eventValues:f}),d=me.useCallback(_=>{const p=i.current;return p.justSubscribed=1,zu({unit:u,fn:()=>{p.stale||(p.stale=1,_())},scope:t,batch:1})},[u,t,l,i]),h=me.useCallback(()=>{const _=l.current,p=i.current;let y,v=0;const g=_.value,m=_.storeKeys,w=_.eventKeys,b=_.eventValues,k=t!==p.scope;if(p.stale||p.justSubscribed||k){v=!p.justSubscribed||k,y=o?[...s]:{...s},m.length===a.length&&w.length===c.length||(v=1);for(let S=0;S<a.length;S++){const x=vc(u[S],t),j=a[S];v||(v=m.includes(j)?g[j]!==x:1),y[j]=x}for(let S=0;S<c.length;S++){const x=f[S],j=c[S];v||(v=w.includes(j)?b[w.indexOf(j)]!==x:1)}}return v&&(_.value=y),_.storeKeys=a,_.eventKeys=c,_.eventValues=f,p.stale=0,p.justSubscribed=!v,p.scope=t,n?_.value.unit:_.value},[d,u,f,t,l,i]);return _c(d,h,h)}function pc(e){return me.useContext(Zs)}function te(e,t){return hc(e,pc())}const ui=e=>{throw Error(e)};typeof window<"u"?me.useLayoutEffect:me.useEffect;const{useSyncExternalStore:_c}=_u,{useSyncExternalStoreWithSelector:nh}=dc,vc=(e,t)=>t?t.getState(e):e.getState(),Zs=me.createContext(null),{Provider:rh}=Zs,ie=600;function yc(e,{tension:t=.5,numOfSeg:n=25,close:r=!1}={}){t=typeof t=="number"?t:.5,n=n||25;var o,i=1,s=e.length,a=0,u=(s-2)*n+2+(r?2*n:0),c=new Float32Array(u),f=new Float32Array((n+2)*4),l=4,d,h,_,p,y,v;for(o=e.slice(0),r?(o.unshift(e[s-1]),o.unshift(e[s-2]),o.push(e[0],e[1])):(o.unshift(e[1]),o.unshift(e[0]),o.push(e[s-2],e[s-1])),f[0]=1;i<n;i++)d=i/n,h=d*d,_=h*d,p=_*2,y=h*3,f[l++]=p-y+1,f[l++]=y-p,f[l++]=_-2*h+d,f[l++]=_-h;return f[++l]=1,v=function(g,m,w){var b=2,k,S,x,j,N,A,B,Z,z,re,ue,$,C,E;for(b;b<w;b+=2)for(S=g[b],x=g[b+1],j=g[b+2],N=g[b+3],A=(j-g[b-2])*t,B=(N-g[b-1])*t,Z=(g[b+4]-S)*t,z=(g[b+5]-x)*t,k=0;k<n;k++)re=k<<2,ue=m[re],$=m[re+1],C=m[re+2],E=m[re+3],c[a++]=ue*S+$*j+C*A+E*Z,c[a++]=ue*x+$*N+C*B+E*z},v(o,f,s),r&&(o=[],o.push(e[s-4],e[s-3],e[s-2],e[s-1]),o.push(e[0],e[1],e[2],e[3]),v(o,f,4)),s=r?0:e.length-2,c[a++]=e[s],c[a]=e[s+1],c}function gc(e){const t=[];let n=[];return e.forEach((r,o,i)=>{const[s,a,u,c,f]=r;s==="start"?n=[[a,u]]:s==="move"&&n.push([a,u]),(s==="end"||o===i.length-1)&&t.push(n.map(([l,d],h,_)=>[+l.toFixed(2),+d.toFixed(2)]))}),t}function mc(e){const t=[];for(let n=0;n<e.length-1;n+=2)t.push([e[n],e[n+1]]);return t}function Xs(e){if(!e.length)return"";const t=e.reduce((n,[r,o],i,s)=>{const[a,u]=s[(i+1)%s.length];return n.push(r,o,(r+a)/2,(o+u)/2),n},["M",...e[0],"Q"]);return t.push("Z"),t.map(bc).join(" ")}function bc(e){return typeof e=="number"?+e.toFixed(1):e}function ci(e,t,n,r=o=>o){return e*r(.5-t*(.5-n))}function wc(e){return[-e[0],-e[1]]}function le(e,t){return[e[0]+t[0],e[1]+t[1]]}function se(e,t){return[e[0]-t[0],e[1]-t[1]]}function ce(e,t){return[e[0]*t,e[1]*t]}function Sc(e,t){return[e[0]/t,e[1]/t]}function mt(e){return[e[1],-e[0]]}function li(e,t){return e[0]*t[0]+e[1]*t[1]}function Oc(e,t){return e[0]===t[0]&&e[1]===t[1]}function kc(e){return Math.hypot(e[0],e[1])}function xc(e){return e[0]*e[0]+e[1]*e[1]}function fi(e,t){return xc(se(e,t))}function ea(e){return Sc(e,kc(e))}function Cc(e,t){return Math.hypot(e[1]-t[1],e[0]-t[0])}function bt(e,t,n){let r=Math.sin(n),o=Math.cos(n),i=e[0]-t[0],s=e[1]-t[1],a=i*o-s*r,u=i*r+s*o;return[a+t[0],u+t[1]]}function br(e,t,n){return le(e,ce(se(t,e),n))}function di(e,t,n){return le(e,ce(t,n))}var{min:ot,PI:$c}=Math,hi=.275,wt=$c+1e-4;function Ec(e,t={}){let{size:n=16,smoothing:r=.5,thinning:o=.5,simulatePressure:i=!0,easing:s=$=>$,start:a={},end:u={},last:c=!1}=t,{cap:f=!0,easing:l=$=>$*(2-$)}=a,{cap:d=!0,easing:h=$=>--$*$*$+1}=u;if(e.length===0||n<=0)return[];let _=e[e.length-1].runningLength,p=a.taper===!1?0:a.taper===!0?Math.max(n,_):a.taper,y=u.taper===!1?0:u.taper===!0?Math.max(n,_):u.taper,v=Math.pow(n*r,2),g=[],m=[],w=e.slice(0,10).reduce(($,C)=>{let E=C.pressure;if(i){let T=ot(1,C.distance/n),Oe=ot(1,1-T);E=ot(1,$+(Oe-$)*(T*hi))}return($+E)/2},e[0].pressure),b=ci(n,o,e[e.length-1].pressure,s),k,S=e[0].vector,x=e[0].point,j=x,N=x,A=j,B=!1;for(let $=0;$<e.length;$++){let{pressure:C}=e[$],{point:E,vector:T,distance:Oe,runningLength:oe}=e[$];if($<e.length-1&&_-oe<3)continue;if(o){if(i){let ge=ot(1,Oe/n),Vn=ot(1,1-ge);C=ot(1,w+(Vn-w)*(ge*hi))}b=ci(n,o,C,s)}else b=n/2;k===void 0&&(k=b);let Fn=oe<p?l(oe/p):1,ke=_-oe<y?h((_-oe)/y):1;b=Math.max(.01,b*Math.min(Fn,ke));let Qt=($<e.length-1?e[$+1]:e[$]).vector,gt=$<e.length-1?li(T,Qt):1,Wn=li(T,S)<0&&!B,Kt=gt!==null&&gt<0;if(Wn||Kt){let ge=ce(mt(S),b);for(let Vn=1/13,Yt=0;Yt<=1;Yt+=Vn)N=bt(se(E,ge),E,wt*Yt),g.push(N),A=bt(le(E,ge),E,wt*-Yt),m.push(A);x=N,j=A,Kt&&(B=!0);continue}if(B=!1,$===e.length-1){let ge=ce(mt(T),b);g.push(se(E,ge)),m.push(le(E,ge));continue}let Jt=ce(mt(br(Qt,T,gt)),b);N=se(E,Jt),($<=1||fi(x,N)>v)&&(g.push(N),x=N),A=le(E,Jt),($<=1||fi(j,A)>v)&&(m.push(A),j=A),w=C,S=T}let Z=e[0].point.slice(0,2),z=e.length>1?e[e.length-1].point.slice(0,2):le(e[0].point,[1,1]),re=[],ue=[];if(e.length===1){if(!(p||y)||c){let $=di(Z,ea(mt(se(Z,z))),-(k||b)),C=[];for(let E=1/13,T=E;T<=1;T+=E)C.push(bt($,Z,wt*2*T));return C}}else{if(!(p||y&&e.length===1))if(f)for(let C=1/13,E=C;E<=1;E+=C){let T=bt(m[0],Z,wt*E);re.push(T)}else{let C=se(g[0],m[0]),E=ce(C,.5),T=ce(C,.51);re.push(se(Z,E),se(Z,T),le(Z,T),le(Z,E))}let $=mt(wc(e[e.length-1].vector));if(y||p&&e.length===1)ue.push(z);else if(d){let C=di(z,$,b);for(let E=1/29,T=E;T<1;T+=E)ue.push(bt(C,z,wt*3*T))}else ue.push(le(z,ce($,b)),le(z,ce($,b*.99)),se(z,ce($,b*.99)),se(z,ce($,b)))}return g.concat(ue,m.reverse(),re)}function Mc(e,t={}){var n;let{streamline:r=.5,size:o=16,last:i=!1}=t;if(e.length===0)return[];let s=.15+(1-r)*.85,a=Array.isArray(e[0])?e:e.map(({x:h,y:_,pressure:p=.5})=>[h,_,p]);if(a.length===2){let h=a[1];a=a.slice(0,-1);for(let _=1;_<5;_++)a.push(br(a[0],h,_/4))}a.length===1&&(a=[...a,[...le(a[0],[1,1]),...a[0].slice(2)]]);let u=[{point:[a[0][0],a[0][1]],pressure:a[0][2]>=0?a[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],c=!1,f=0,l=u[0],d=a.length-1;for(let h=1;h<a.length;h++){let _=i&&h===d?a[h].slice(0,2):br(l.point,a[h],s);if(Oc(l.point,_))continue;let p=Cc(_,l.point);if(f+=p,h<d&&!c){if(f<o)continue;c=!0}l={point:_,pressure:a[h][2]>=0?a[h][2]:.5,vector:ea(se(l.point,_)),distance:p,runningLength:f},u.push(l)}return u[0].vector=((n=u[1])==null?void 0:n.vector)||[0,0],u}function Pc(e,t={}){return Ec(Mc(e,t),t)}var ta=Pc;const Ge="f259a402-be81-4806-ba5b-86a4814fb9b1",jc={linear:e=>e},na={simulatePressure:!1,smoothing:1,thinning:.1,streamline:0,easing:jc.linear};function X(e){if(typeof e=="number")return(Math.abs(e*2654435761)>>>0).toString(16);if(typeof e=="boolean")return e?"1":"0";if(e===null)return"null";if(e===void 0)return"undefined";if(typeof e=="string"){let t=2166136261;for(let n=0;n<e.length;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24),t=t>>>0;return t.toString(16)}if(Array.isArray(e)){let t=2166136261;for(let n=0;n<e.length;n++){t^=(n+1)*2654435761;const r=X(e[n]);for(let o=0;o<r.length;o++)t^=r.charCodeAt(o),t*=16777619,t=t>>>0}return t.toString(16)}if(typeof e=="object"){let t=2166136261;const n=Object.keys(e).sort();for(let r=0;r<n.length;r++){const o=n[r],i=X(o);t^=parseInt(i,16),t*=16777619,t=t>>>0;const s=X(e[o]);t^=parseInt(s,16),t*=16777619,t=t>>>0}return t.toString(16)}return X(String(e))}const U={Remove:"remove",Replace:"replace",Add:"add"},ra=Symbol.for("__MUTATIVE_PROXY_DRAFT__"),Tc=Symbol("__MUTATIVE_RAW_RETURN_SYMBOL__"),pn=Symbol.iterator,ne={mutable:"mutable",immutable:"immutable"},lo={};function $t(e,t){return e instanceof Map?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function pi(e,t){if(t in e){let n=Reflect.getPrototypeOf(e);for(;n;){const r=Reflect.getOwnPropertyDescriptor(n,t);if(r)return r;n=Reflect.getPrototypeOf(n)}}}function fo(e){return Object.getPrototypeOf(e)===Set.prototype}function ho(e){return Object.getPrototypeOf(e)===Map.prototype}function ee(e){var t;return(t=e.copy)!==null&&t!==void 0?t:e.original}function Xe(e){return!!P(e)}function P(e){return typeof e!="object"?null:e==null?void 0:e[ra]}function po(e){var t;const n=P(e);return n?(t=n.copy)!==null&&t!==void 0?t:n.original:e}function ye(e,t){if(!e||typeof e!="object")return!1;let n;return Object.getPrototypeOf(e)===Object.prototype||Array.isArray(e)||e instanceof Map||e instanceof Set||!!(t!=null&&t.mark)&&((n=t.mark(e,ne))===ne.immutable||typeof n=="function")}function oa(e,t=[]){if(Object.hasOwnProperty.call(e,"key")){const n=e.parent.copy,r=P(Ie(n,e.key));if(r!==null&&(r==null?void 0:r.original)!==e.original)return null;const o=e.parent.type===3,i=o?Array.from(e.parent.setMap.keys()).indexOf(e.key):e.key;if(!(o&&n.size>i||$t(n,i)))return null;t.push(i)}if(e.parent)return oa(e.parent,t);t.reverse();try{Rc(e.copy,t)}catch{return null}return t}function rt(e){return Array.isArray(e)?1:e instanceof Map?2:e instanceof Set?3:0}function Ie(e,t){return rt(e)===2?e.get(t):e[t]}function Ft(e,t,n){rt(e)===2?e.set(t,n):e[t]=n}function nr(e,t){const n=P(e);return(n?ee(n):e)[t]}function je(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function wr(e){if(e)for(;e.finalities.revoke.length>0;)e.finalities.revoke.pop()()}function Ke(e,t){return t?e:[""].concat(e).map(n=>{const r=`${n}`;return r.indexOf("/")===-1&&r.indexOf("~")===-1?r:r.replace(/~/g,"~0").replace(/\//g,"~1")}).join("/")}function Rc(e,t){for(let n=0;n<t.length-1;n+=1){const r=t[n];if(e=Ie(rt(e)===3?Array.from(e):e,r),typeof e!="object")throw new Error(`Cannot resolve patch at '${t.join("/")}'.`)}return e}function Ac(e){const t=Object.create(Object.getPrototypeOf(e));return Reflect.ownKeys(e).forEach(n=>{let r=Reflect.getOwnPropertyDescriptor(e,n);if(r.enumerable&&r.configurable&&r.writable){t[n]=e[n];return}r.writable||(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(r={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[n]}),Reflect.defineProperty(t,n,r)}),t}const Ic=Object.prototype.propertyIsEnumerable;function ia(e,t){let n;if(Array.isArray(e))return Array.prototype.concat.call(e);if(e instanceof Set){if(!fo(e)){const r=Object.getPrototypeOf(e).constructor;return new r(e.values())}return Set.prototype.difference?Set.prototype.difference.call(e,new Set):new Set(e.values())}else if(e instanceof Map){if(!ho(e)){const r=Object.getPrototypeOf(e).constructor;return new r(e)}return new Map(e)}else if(t!=null&&t.mark&&(n=t.mark(e,ne),n!==void 0)&&n!==ne.mutable){if(n===ne.immutable)return Ac(e);if(typeof n=="function"){if(t.enablePatches||t.enableAutoFreeze)throw new Error("You can't use mark and patches or auto freeze together.");return n()}throw new Error(`Unsupported mark result: ${n}`)}else if(typeof e=="object"&&Object.getPrototypeOf(e)===Object.prototype){const r={};return Object.keys(e).forEach(o=>{r[o]=e[o]}),Object.getOwnPropertySymbols(e).forEach(o=>{Ic.call(e,o)&&(r[o]=e[o])}),r}else throw new Error("Please check mark() to ensure that it is a stable marker draftable function.")}function H(e){e.copy||(e.copy=ia(e.original,e.options))}function Ot(e){if(!ye(e))return po(e);if(Array.isArray(e))return e.map(Ot);if(e instanceof Map){const n=Array.from(e.entries()).map(([r,o])=>[r,Ot(o)]);if(!ho(e)){const r=Object.getPrototypeOf(e).constructor;return new r(n)}return new Map(n)}if(e instanceof Set){const n=Array.from(e).map(Ot);if(!fo(e)){const r=Object.getPrototypeOf(e).constructor;return new r(n)}return new Set(n)}const t=Object.create(Object.getPrototypeOf(e));for(const n in e)t[n]=Ot(e[n]);return t}function _n(e){return Xe(e)?Ot(e):e}function we(e){var t;e.assignedMap=(t=e.assignedMap)!==null&&t!==void 0?t:new Map,e.operated||(e.operated=!0,e.parent&&we(e.parent))}function _i(){throw new Error("Cannot modify frozen object")}function it(e,t,n,r,o){{n=n??new WeakMap,r=r??[],o=o??[];const s=n.has(e)?n.get(e):e;if(r.length>0){const a=r.indexOf(s);if(s&&typeof s=="object"&&a!==-1)throw r[0]===s?new Error("Forbids circular reference"):new Error(`Forbids circular reference: ~/${o.slice(0,a).map((u,c)=>{if(typeof u=="symbol")return`[${u.toString()}]`;const f=r[c];return typeof u=="object"&&(f instanceof Map||f instanceof Set)?Array.from(f.keys()).indexOf(u):u}).join("/")}`);r.push(s),o.push(t)}else r.push(s)}if(Object.isFrozen(e)||Xe(e)){r.pop(),o.pop();return}switch(rt(e)){case 2:for(const[a,u]of e)it(a,a,n,r,o),it(u,a,n,r,o);e.set=e.clear=e.delete=_i;break;case 3:for(const a of e)it(a,a,n,r,o);e.add=e.clear=e.delete=_i;break;case 1:Object.freeze(e);let s=0;for(const a of e)it(a,s,n,r,o),s+=1;break;default:Object.freeze(e),Object.keys(e).forEach(a=>{const u=e[a];it(u,a,n,r,o)})}r.pop(),o.pop()}function _o(e,t){const n=rt(e);if(n===0)Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)});else if(n===1){let r=0;for(const o of e)t(r,o,e),r+=1}else e.forEach((r,o)=>t(o,r,e))}function sa(e,t,n){if(Xe(e)||!ye(e,n)||t.has(e)||Object.isFrozen(e))return;const r=e instanceof Set,o=r?new Map:void 0;if(t.add(e),_o(e,(i,s)=>{var a;if(Xe(s)){const u=P(s);H(u);const c=!((a=u.assignedMap)===null||a===void 0)&&a.size||u.operated?u.copy:u.original;Ft(r?o:e,i,c)}else sa(s,t,n)}),o){const i=e,s=Array.from(i);i.clear(),s.forEach(a=>{i.add(o.has(a)?o.get(a):a)})}}function Dc(e,t){const n=e.type===3?e.setMap:e.copy;e.finalities.revoke.length>1&&e.assignedMap.get(t)&&n&&sa(Ie(n,t),e.finalities.handledSet,e.options)}function Sr(e){e.type===3&&e.copy&&(e.copy.clear(),e.setMap.forEach(t=>{e.copy.add(po(t))}))}function Or(e,t,n,r){if(e.operated&&e.assignedMap&&e.assignedMap.size>0&&!e.finalized){if(n&&r){const i=oa(e);i&&t(e,i,n,r)}e.finalized=!0}}function vo(e,t,n,r){const o=P(n);o&&(o.callbacks||(o.callbacks=[]),o.callbacks.push((i,s)=>{var a;const u=e.type===3?e.setMap:e.copy;if(je(Ie(u,t),n)){let c=o.original;o.copy&&(c=o.copy),Sr(e),Or(e,r,i,s),e.options.enableAutoFreeze&&(e.options.updatedValues=(a=e.options.updatedValues)!==null&&a!==void 0?a:new WeakMap,e.options.updatedValues.set(c,o.original)),Ft(u,t,c)}}),e.options.enableAutoFreeze&&o.finalities!==e.finalities&&(e.options.enableAutoFreeze=!1)),ye(n,e.options)&&e.finalities.draft.push(()=>{const i=e.type===3?e.setMap:e.copy;je(Ie(i,t),n)&&Dc(e,t)})}function Uc(e,t,n,r,o){let{original:i,assignedMap:s,options:a}=e,u=e.copy;u.length<i.length&&([i,u]=[u,i],[n,r]=[r,n]);for(let c=0;c<i.length;c+=1)if(s.get(c.toString())&&u[c]!==i[c]){const f=t.concat([c]),l=Ke(f,o);n.push({op:U.Replace,path:l,value:_n(u[c])}),r.push({op:U.Replace,path:l,value:_n(i[c])})}for(let c=i.length;c<u.length;c+=1){const f=t.concat([c]),l=Ke(f,o);n.push({op:U.Add,path:l,value:_n(u[c])})}if(i.length<u.length){const{arrayLengthAssignment:c=!0}=a.enablePatches;if(c){const f=t.concat(["length"]),l=Ke(f,o);r.push({op:U.Replace,path:l,value:i.length})}else for(let f=u.length;i.length<f;f-=1){const l=t.concat([f-1]),d=Ke(l,o);r.push({op:U.Remove,path:d})}}}function Lc({original:e,copy:t,assignedMap:n},r,o,i,s){n.forEach((a,u)=>{const c=Ie(e,u),f=_n(Ie(t,u)),l=a?$t(e,u)?U.Replace:U.Add:U.Remove;if(je(c,f)&&l===U.Replace)return;const d=r.concat(u),h=Ke(d,s);o.push(l===U.Remove?{op:l,path:h}:{op:l,path:h,value:f}),i.push(l===U.Add?{op:U.Remove,path:h}:l===U.Remove?{op:U.Add,path:h,value:c}:{op:U.Replace,path:h,value:c})})}function Nc({original:e,copy:t},n,r,o,i){let s=0;e.forEach(a=>{if(!t.has(a)){const u=n.concat([s]),c=Ke(u,i);r.push({op:U.Remove,path:c,value:a}),o.unshift({op:U.Add,path:c,value:a})}s+=1}),s=0,t.forEach(a=>{if(!e.has(a)){const u=n.concat([s]),c=Ke(u,i);r.push({op:U.Add,path:c,value:a}),o.unshift({op:U.Remove,path:c,value:a})}s+=1})}function At(e,t,n,r){const{pathAsArray:o=!0}=e.options.enablePatches;switch(e.type){case 0:case 2:return Lc(e,t,n,r,o);case 1:return Uc(e,t,n,r,o);case 3:return Nc(e,t,n,r,o)}}const Sn=(e,t,n=!1)=>{if(typeof e=="object"&&e!==null&&(!ye(e,t)||n))throw new Error("Strict mode: Mutable data cannot be accessed directly, please use 'unsafe(callback)' wrap.")},kr={get size(){return ee(P(this)).size},has(e){return ee(P(this)).has(e)},set(e,t){const n=P(this),r=ee(n);return(!r.has(e)||!je(r.get(e),t))&&(H(n),we(n),n.assignedMap.set(e,!0),n.copy.set(e,t),vo(n,e,t,At)),this},delete(e){if(!this.has(e))return!1;const t=P(this);return H(t),we(t),t.original.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.copy.delete(e),!0},clear(){const e=P(this);if(this.size){H(e),we(e),e.assignedMap=new Map;for(const[t]of e.original)e.assignedMap.set(t,!1);e.copy.clear()}},forEach(e,t){const n=P(this);ee(n).forEach((r,o)=>{e.call(t,this.get(o),o,this)})},get(e){var t,n;const r=P(this),o=ee(r).get(e),i=((n=(t=r.options).mark)===null||n===void 0?void 0:n.call(t,o,ne))===ne.mutable;if(r.options.strict&&Sn(o,r.options,i),i||r.finalized||!ye(o,r.options)||o!==r.original.get(e))return o;const s=lo.createDraft({original:o,parentDraft:r,key:e,finalities:r.finalities,options:r.options});return H(r),r.copy.set(e,s),s},keys(){return ee(P(this)).keys()},values(){const e=this.keys();return{[pn]:()=>this.values(),next:()=>{const t=e.next();return t.done?t:{done:!1,value:this.get(t.value)}}}},entries(){const e=this.keys();return{[pn]:()=>this.entries(),next:()=>{const t=e.next();if(t.done)return t;const n=this.get(t.value);return{done:!1,value:[t.value,n]}}}},[pn](){return this.entries()}},zc=Reflect.ownKeys(kr),vi=(e,t,{isValuesIterator:n})=>()=>{var r,o;const i=t.next();if(i.done)return i;const s=i.value;let a=e.setMap.get(s);const u=P(a),c=((o=(r=e.options).mark)===null||o===void 0?void 0:o.call(r,a,ne))===ne.mutable;if(e.options.strict&&Sn(s,e.options,c),!c&&!u&&ye(s,e.options)&&!e.finalized&&e.original.has(s)){const f=lo.createDraft({original:s,parentDraft:e,key:s,finalities:e.finalities,options:e.options});e.setMap.set(s,f),a=f}else u&&(a=u.proxy);return{done:!1,value:n?a:[a,a]}},On={get size(){return P(this).setMap.size},has(e){const t=P(this);if(t.setMap.has(e))return!0;H(t);const n=P(e);return!!(n&&t.setMap.has(n.original))},add(e){const t=P(this);return this.has(e)||(H(t),we(t),t.assignedMap.set(e,!0),t.setMap.set(e,e),vo(t,e,e,At)),this},delete(e){if(!this.has(e))return!1;const t=P(this);H(t),we(t);const n=P(e);return n&&t.setMap.has(n.original)?(t.assignedMap.set(n.original,!1),t.setMap.delete(n.original)):(!n&&t.setMap.has(e)?t.assignedMap.set(e,!1):t.assignedMap.delete(e),t.setMap.delete(e))},clear(){if(!this.size)return;const e=P(this);H(e),we(e);for(const t of e.original)e.assignedMap.set(t,!1);e.setMap.clear()},values(){const e=P(this);H(e);const t=e.setMap.keys();return{[Symbol.iterator]:()=>this.values(),next:vi(e,t,{isValuesIterator:!0})}},entries(){const e=P(this);H(e);const t=e.setMap.keys();return{[Symbol.iterator]:()=>this.entries(),next:vi(e,t,{isValuesIterator:!1})}},keys(){return this.values()},[pn](){return this.values()},forEach(e,t){const n=this.values();let r=n.next();for(;!r.done;)e.call(t,r.value,r.value,this),r=n.next()}};Set.prototype.difference&&Object.assign(On,{intersection(e){return Set.prototype.intersection.call(new Set(this.values()),e)},union(e){return Set.prototype.union.call(new Set(this.values()),e)},difference(e){return Set.prototype.difference.call(new Set(this.values()),e)},symmetricDifference(e){return Set.prototype.symmetricDifference.call(new Set(this.values()),e)},isSubsetOf(e){return Set.prototype.isSubsetOf.call(new Set(this.values()),e)},isSupersetOf(e){return Set.prototype.isSupersetOf.call(new Set(this.values()),e)},isDisjointFrom(e){return Set.prototype.isDisjointFrom.call(new Set(this.values()),e)}});const qc=Reflect.ownKeys(On),aa=new WeakSet,ua={get(e,t,n){var r,o;const i=(r=e.copy)===null||r===void 0?void 0:r[t];if(i&&aa.has(i))return i;if(t===ra)return e;let s;if(e.options.mark){const c=t==="size"&&(e.original instanceof Map||e.original instanceof Set)?Reflect.get(e.original,t):Reflect.get(e.original,t,n);if(s=e.options.mark(c,ne),s===ne.mutable)return e.options.strict&&Sn(c,e.options,!0),c}const a=ee(e);if(a instanceof Map&&zc.includes(t)){if(t==="size")return Object.getOwnPropertyDescriptor(kr,"size").get.call(e.proxy);const c=kr[t];if(c)return c.bind(e.proxy)}if(a instanceof Set&&qc.includes(t)){if(t==="size")return Object.getOwnPropertyDescriptor(On,"size").get.call(e.proxy);const c=On[t];if(c)return c.bind(e.proxy)}if(!$t(a,t)){const c=pi(a,t);return c?"value"in c?c.value:(o=c.get)===null||o===void 0?void 0:o.call(e.proxy):void 0}const u=a[t];if(e.options.strict&&Sn(u,e.options),e.finalized||!ye(u,e.options))return u;if(u===nr(e.original,t)){if(H(e),e.copy[t]=yo({original:e.original[t],parentDraft:e,key:e.type===1?Number(t):t,finalities:e.finalities,options:e.options}),typeof s=="function"){const c=P(e.copy[t]);return H(c),we(c),c.copy}return e.copy[t]}return u},set(e,t,n){var r;if(e.type===3||e.type===2)throw new Error("Map/Set draft does not support any property assignment.");let o;if(e.type===1&&t!=="length"&&!(Number.isInteger(o=Number(t))&&o>=0&&(t===0||o===0||String(o)===String(t))))throw new Error("Only supports setting array indices and the 'length' property.");const i=pi(ee(e),t);if(i!=null&&i.set)return i.set.call(e.proxy,n),!0;const s=nr(ee(e),t),a=P(s);return a&&je(a.original,n)?(e.copy[t]=n,e.assignedMap=(r=e.assignedMap)!==null&&r!==void 0?r:new Map,e.assignedMap.set(t,!1),!0):(je(n,s)&&(n!==void 0||$t(e.original,t))||(H(e),we(e),$t(e.original,t)&&je(n,e.original[t])?e.assignedMap.delete(t):e.assignedMap.set(t,!0),e.copy[t]=n,vo(e,t,n,At)),!0)},has(e,t){return t in ee(e)},ownKeys(e){return Reflect.ownKeys(ee(e))},getOwnPropertyDescriptor(e,t){const n=ee(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},getPrototypeOf(e){return Reflect.getPrototypeOf(e.original)},setPrototypeOf(){throw new Error("Cannot call 'setPrototypeOf()' on drafts")},defineProperty(){throw new Error("Cannot call 'defineProperty()' on drafts")},deleteProperty(e,t){var n;return e.type===1?ua.set.call(this,e,t,void 0,e.proxy):(nr(e.original,t)!==void 0||t in e.original?(H(e),we(e),e.assignedMap.set(t,!1)):(e.assignedMap=(n=e.assignedMap)!==null&&n!==void 0?n:new Map,e.assignedMap.delete(t)),e.copy&&delete e.copy[t],!0)}};function yo(e){const{original:t,parentDraft:n,key:r,finalities:o,options:i}=e,s=rt(t),a={type:s,finalized:!1,parent:n,original:t,copy:null,proxy:null,finalities:o,options:i,setMap:s===3?new Map(t.entries()):void 0};(r||"key"in e)&&(a.key=r);const{proxy:u,revoke:c}=Proxy.revocable(s===1?Object.assign([],a):a,ua);if(o.revoke.push(c),aa.add(u),a.proxy=u,n){const f=n;f.finalities.draft.push((l,d)=>{var h,_;const p=P(u);let y=f.type===3?f.setMap:f.copy;const v=Ie(y,r),g=P(v);if(g){let m=g.original;g.operated&&(m=po(v)),Sr(g),Or(g,At,l,d),f.options.enableAutoFreeze&&(f.options.updatedValues=(h=f.options.updatedValues)!==null&&h!==void 0?h:new WeakMap,f.options.updatedValues.set(m,g.original)),Ft(y,r,m)}(_=p.callbacks)===null||_===void 0||_.forEach(m=>{m(l,d)})})}else{const f=P(u);f.finalities.draft.push((l,d)=>{Sr(f),Or(f,At,l,d)})}return u}lo.createDraft=yo;function Fc(e,t,n,r,o){var i;const s=P(e),a=(i=s==null?void 0:s.original)!==null&&i!==void 0?i:e,u=!!t.length;if(s!=null&&s.operated)for(;s.finalities.draft.length>0;)s.finalities.draft.pop()(n,r);const c=u?t[0]:s?s.operated?s.copy:s.original:e;return s&&wr(s),o&&it(c,c,s==null?void 0:s.options.updatedValues),[c,n&&u?[{op:U.Replace,path:[],value:t[0]}]:n,r&&u?[{op:U.Replace,path:[],value:a}]:r]}function Wc(e,t){var n;const r={draft:[],revoke:[],handledSet:new WeakSet};let o,i;t.enablePatches&&(o=[],i=[]);const a=((n=t.mark)===null||n===void 0?void 0:n.call(t,e,ne))===ne.mutable||!ye(e,t)?e:yo({original:e,parentDraft:null,finalities:r,options:t});return[a,(u=[])=>{const[c,f,l]=Fc(a,u,o,i,t.enableAutoFreeze);return t.enablePatches?[c,f,l]:c}]}function xr(e){const{rootDraft:t,value:n,useRawReturn:r=!1,isRoot:o=!0}=e;_o(n,(i,s,a)=>{const u=P(s);if(u&&t&&u.finalities===t.finalities){e.isContainDraft=!0;const c=u.original;if(a instanceof Set){const f=Array.from(a);a.clear(),f.forEach(l=>a.add(i===l?c:l))}else Ft(a,i,c)}else typeof s=="object"&&s!==null&&(e.value=s,e.isRoot=!1,xr(e))}),o&&(e.isContainDraft||console.warn("The return value does not contain any draft, please use 'rawReturn()' to wrap the return value to improve performance."),r&&console.warn("The return value contains drafts, please don't use 'rawReturn()' to wrap the return value."))}function ca(e){var t;const n=P(e);if(!ye(e,n==null?void 0:n.options))return e;const r=rt(e);if(n&&!n.operated)return n.original;let o;function i(){o=r===2?ho(e)?new Map(e):new(Object.getPrototypeOf(e)).constructor(e):r===3?Array.from(n.setMap.values()):ia(e,n==null?void 0:n.options)}if(n){n.finalized=!0;try{i()}finally{n.finalized=!1}}else o=e;if(_o(o,(s,a)=>{if(n&&je(Ie(n.original,s),a))return;const u=ca(a);u!==a&&(o===e&&i(),Ft(o,s,u))}),r===3){const s=(t=n==null?void 0:n.original)!==null&&t!==void 0?t:o;return fo(s)?new Set(o):new(Object.getPrototypeOf(s)).constructor(o)}return o}function yi(e){if(!Xe(e))throw new Error(`current() is only used for Draft, parameter: ${e}`);return ca(e)}const Vc=e=>function t(n,r,o){var i,s,a;if(typeof n=="function"&&typeof r!="function")return function(b,...k){return t(b,S=>n.call(this,S,...k),r)};const u=n,c=r;let f=o;if(typeof r!="function"&&(f=r),f!==void 0&&Object.prototype.toString.call(f)!=="[object Object]")throw new Error(`Invalid options: ${f}, 'options' should be an object.`);f=Object.assign(Object.assign({},e),f);const l=Xe(u)?yi(u):u,d=Array.isArray(f.mark)?(b,k)=>{for(const S of f.mark){if(typeof S!="function")throw new Error(`Invalid mark: ${S}, 'mark' should be a function.`);const x=S(b,k);if(x)return x}}:f.mark,h=(i=f.enablePatches)!==null&&i!==void 0?i:!1,_=(s=f.strict)!==null&&s!==void 0?s:!1,y={enableAutoFreeze:(a=f.enableAutoFreeze)!==null&&a!==void 0?a:!1,mark:d,strict:_,enablePatches:h};if(!ye(l,y)&&typeof l=="object"&&l!==null)throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");const[v,g]=Wc(l,y);if(typeof r!="function"){if(!ye(l,y))throw new Error("Invalid base state: create() only supports plain objects, arrays, Set, Map or using mark() to mark the state as immutable.");return[v,g]}let m;try{m=c(v)}catch(b){throw wr(P(v)),b}const w=b=>{const k=P(v);if(!Xe(b)){if(b!==void 0&&!je(b,v)&&(k!=null&&k.operated))throw new Error("Either the value is returned as a new non-draft value, or only the draft is modified without returning any value.");const x=b==null?void 0:b[Tc];if(x){const j=x[0];return y.strict&&typeof b=="object"&&b!==null&&xr({rootDraft:k,value:b,useRawReturn:!0}),g([j])}if(b!==void 0)return typeof b=="object"&&b!==null&&xr({rootDraft:k,value:b}),g([b])}if(b===v||b===void 0)return g([]);const S=P(b);if(y===S.options){if(S.operated)throw new Error("Cannot return a modified child draft.");return g([yi(b)])}return g([b])};return m instanceof Promise?m.then(w,b=>{throw wr(P(v)),b}):w(m)},Cr=Vc();Object.prototype.constructor.toString();function la(e,t){const n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&Object.keys(e).every(o=>t.hasOwnProperty(o))}function gi(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(n=>t.hasOwnProperty(n)&&e[n]===t[n])}function vn(e,t){return typeof e!="object"||typeof t!="object"||e===null||t===null?e===t:la(e,t)?Object.keys(e).every(n=>vn(e[n],t[n])):!1}function go(e){if(!kt(e))return e;const t={};for(const[n,r]of Object.entries(e))r!==void 0&&(t[n]=r);return t}function fa(e,t){if(!kt(e)||!kt(t))return t;const n=Object.assign({},e);for(const r of Object.keys(t)){if(t[r]===void 0)continue;if(t[r]===null){delete n[r];continue}const o=kt(e[r])&&kt(t[r]);n[r]=o?fa(e[r],t[r]):t[r]}return n}function kt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Bc(e,t,n){if(!e||t.length===0)return;let r=e||{};for(let i=0;i<t.length-1;i++){const s=t[i];(!(s in r)||typeof r[s]!="object")&&(r[s]=typeof t[i+1]=="number"?[]:{}),r=r[s]}const o=t[t.length-1];Array.isArray(r)&&typeof o=="number"?r.splice(o,0,n):r[o]=n}function mi(e,t,n){if(!e||t.length===0)return;let r=e||{};for(let o=0;o<t.length-1;o++){const i=t[o];(!(i in r)||typeof r[i]!="object")&&(r[i]=typeof t[o+1]=="number"?[]:{}),r=r[i]}r[t[t.length-1]]=n}function da(e,t){if(!e||t.length===0)return;const[n,...r]=t;if(n in e){if(r.length===0){Array.isArray(e)?e.splice(n,1):delete e[n];return}da(e[n],r),Hc(e[n])&&delete e[n]}}function Hc(e){return e&&Object.keys(e).length===0}function Qc(e){return new Date(e)}function Kc(e){return new Date(e+"Z")}function Jc(e){return new Date(e+"T00:00:00Z")}function Yc(e){const[t,n]=e.split(" ");return new Date(t+"T"+n+"Z")}function Gc(e){const[t,n]=e.split(" ");return new Date(t+"T"+n+"Z")}function Zc(e){return new Date(e)}function Xc(e){const t=/^(\w{3}) (\w{3}) (\d{2}) (\d{4})$/;if(!e.match(t))throw new Error(`Unable to parse \`${e}\` as a date.`);const r=new Date(e+" UTC");return new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),0,0,0,0))}function el(e){const t=/^(.+T.+)([+-])(\d{2})$/,n=e.match(t);if(n){const[,r,o,i]=n,s=`${r}${o}${i}:00`;return new Date(s)}return null}const tl=[Gc,Xc,Zc,Jc,Kc,Qc,el,Yc];function nl(e,t){try{const n=e(t);return n instanceof Date&&!isNaN(n.getTime())?n:null}catch{return null}}function ha(e){for(const t of tl){const n=nl(t,e);if(n)return n}return null}function rl(e){try{const t=JSON.parse(e);return typeof t=="string"?ha(t):null}catch{return null}}function An(e){if(e instanceof Date)return e;if(typeof e=="string"){const t=ha(e)||rl(e);if(!t)throw new Error(`Unable to parse \`${e}\` as a date.`);return t}else if(typeof e=="number")return new Date(e);throw new Error(`Invalid date value \`${e}\`. Expected a date, number, or string, got type ${typeof e}.`)}function ol(e){return e.cardinality==="one"}function mo(e){return e["value-type"]==="ref"}function bo(e){return e["value-type"]==="blob"}function Wt(e,t){return e[t]}function In(e,t){return t.reduce((n,r)=>n&&n.get(r),e)}function fe(e,t){if(t.length===0)throw new Error("path must have at least one element");if(t.length===1){e.delete(t[0]);return}const[n,...r]=t;e.has(n)&&fe(e.get(n),r)}function K(e,t,n){if(t.length===0)throw new Error("path must have at least one element");if(t.length===1){e.set(t[0],n);return}const[r,...o]=t;let i=e.get(r);i||(i=new Map,e.set(r,i)),K(i,o,n)}function pa(e,t,n){const r=new Map,o=new Map,i=new Map;for(const s of t){let[a,u,c,f]=s;const l=Wt(e,u);if(!l){console.warn("no such attr",a,e);continue}l["checked-data-type"]==="date"&&n&&(c=An(c),s[2]=c),mo(l)&&K(i,[c,u,a],s),K(r,[a,u,c],s),K(o,[u,a,c],s)}return{eav:r,aev:o,vae:i}}function _a(e){const t=new Map,n=new Map,r=new Map,o=new Map;for(const i of Object.values(e)){const s=i["forward-identity"],[a,u,c]=s,f=i["reverse-identity"];if(K(r,[u,c],i),bo(i)&&K(t,[u,c],i),i["primary?"]&&K(n,[u],i),f){const[l,d,h]=f;K(o,[d,h],i)}}return{blobAttrs:t,primaryKeys:n,forwardIdents:r,revIdents:o}}function il(e){return{__type:e.__type,attrs:e.attrs,triples:J(e.eav,3),cardinalityInference:e.cardinalityInference,linkIndex:e.linkIndex,useDateObjects:e.useDateObjects}}function sl(e){return $r(e.attrs,e.triples,e.cardinalityInference,e.linkIndex,e.useDateObjects)}function wo(e){e.attrIndexes=_a(e.attrs)}function $r(e,t,n,r,o){const i=pa(e,t,o);return i.useDateObjects=o,i.attrs=e,i.attrIndexes=_a(e),i.cardinalityInference=n,i.linkIndex=r,i.__type="store",i}function Vt(e,t){var n,r;let o;if(Array.isArray(t[0])){const[s,a]=t[0],u=e.aev.get(s);if(!u)return null;o=(n=J(u,2).find(f=>f[2]===a))===null||n===void 0?void 0:n[0]}else o=t[0];if(!o)return null;const i=t[2];if(Array.isArray(i)&&i.length===2&&e.aev.get(i[0])){const[s,a]=i,u=e.aev.get(s);if(!u)return null;const f=(r=J(u,2).find(p=>p[2]===a))===null||r===void 0?void 0:r[0];if(!f)return null;const[l,d,h,..._]=t;return[o,d,f,..._]}else{const[s,...a]=t;return[o,...a]}}function al(e,t){const n=Vt(e,t);if(!n)return;const[r,o,i]=n,s=Wt(e.attrs,o);s&&(fe(e.eav,[r,o,i]),fe(e.aev,[o,r,i]),mo(s)&&fe(e.vae,[i,o,r]))}let ul=0;function va(e,t,n){const[r,o,i]=n;let s;const a=In(e.ea,[r,o,i]);return a&&(s=a[3]),s||Date.now()*10+ul++}function cl(e,t){var n;const r=Vt(e,t);if(!r)return;let[o,i,s]=r;const a=Wt(e.attrs,i);if(!a)return;a["checked-data-type"]==="date"&&e.useDateObjects&&(s=An(s));const u=In(e.eav,[o,i,s]),c=(n=u==null?void 0:u[3])!==null&&n!==void 0?n:va(e,a,r),f=[o,i,s,c];ol(a)?(K(e.eav,[o,i],new Map([[s,f]])),K(e.aev,[i,o],new Map([[s,f]]))):(K(e.eav,[o,i,s],f),K(e.aev,[i,o,s],f)),mo(a)&&K(e.vae,[s,i,o],f)}function ll(e,t){var n;const r=Vt(e,t);if(!r)return;const[o,i,s]=r,a=Wt(e.attrs,i);if(!a)return;if(!bo(a))throw new Error("merge operation is not supported for links");const u=In(e.eav,[o,i]);if(!u)return;const c=(n=u.values().next())===null||n===void 0?void 0:n.value;if(!c)return;const f=c[2],l=fa(f,s),d=[o,i,l,va(e,a,c)];K(e.eav,[o,i],new Map([[l,d]]))}function Er(e,t){var n,r;const[o,i]=t,s=Vt(e,[o]);if(!s)return;const[a]=s,u=e.eav.get(a);if(u){for(const f of u.keys()){const l=e.attrs[f];l&&l["on-delete-reverse"]==="cascade"&&J(u.get(f),1).forEach(([d,h,_])=>{var p;return Er(e,[_,(p=l["reverse-identity"])===null||p===void 0?void 0:p[1]])}),(!i||!l||((n=l["forward-identity"])===null||n===void 0?void 0:n[1])===i)&&(fe(e.aev,[f,a]),fe(e.eav,[a,f]))}u.size===0&&fe(e.eav,[a])}const c=e.vae.get(a)&&J(e.vae.get(a),2);c&&c.forEach(f=>{var l,d,h;const[_,p,y]=f,v=e.attrs[p];(!i||!v||((l=v["reverse-identity"])===null||l===void 0?void 0:l[1])===i)&&(fe(e.eav,[_,p,y]),fe(e.aev,[p,_,y]),fe(e.vae,[y,p,_])),v&&v["on-delete"]==="cascade"&&((d=v["reverse-identity"])===null||d===void 0?void 0:d[1])===i&&Er(e,[_,(h=v["forward-identity"])===null||h===void 0?void 0:h[1]])}),((r=e.vae.get(a))===null||r===void 0?void 0:r.size)===0&&fe(e.vae,[a])}function ya(e,t){const n=pa(e.attrs,t,e.useDateObjects);Object.keys(n).forEach(r=>{e[r]=n[r]})}function fl(e,[t]){e.attrs[t.id]=t,wo(e)}function ga(e){return J(e.eav,3)}function dl(e,[t]){if(!e.attrs[t])return;const n=ga(e).filter(([r,o])=>o!==t);delete e.attrs[t],wo(e),ya(e,n)}function hl(e,[t]){const n=e.attrs[t.id];n&&(e.attrs[t.id]=Object.assign(Object.assign({},n),t),wo(e),ya(e,ga(e)))}function pl(e,t){const[n,...r]=t;switch(n){case"add-triple":cl(e,r);break;case"deep-merge-triple":ll(e,r);break;case"retract-triple":al(e,r);break;case"delete-entity":Er(e,r);break;case"add-attr":fl(e,r);break;case"delete-attr":dl(e,r);break;case"update-attr":hl(e,r);break;case"rule-params":break;default:throw new Error(`unhandled transaction action: ${n}`)}}function J(e,t,n=[]){if(!e||t===0)return n;if(t===1){for(const r of e.values())n.push(r);return n}for(const r of e.values())J(r,t-1,n);return n}function rn(e,t,n){var r,o;const i=[];if(n!=null&&n.hasOwnProperty("$not")){for(const a of t.keys())n.$not!==a&&i.push(t.get(a));return i}if(n!=null&&n.hasOwnProperty("$isNull")){const{attrId:a,isNull:u,reverse:c}=n.$isNull;if(c)for(const f of t.keys()){const l=e.vae.get(f),d=!l||((r=l.get(a))===null||r===void 0?void 0:r.get(null))||!l.get(a);(u?d:!d)&&i.push(t.get(f))}else{const f=e.aev.get(a);for(const l of t.keys()){const d=!f||((o=f.get(l))===null||o===void 0?void 0:o.get(null))||!f.get(l);(u?d:!d)&&i.push(t.get(l))}}return i}if(n!=null&&n.$comparator)return J(t,1).filter(n.$op);const s=n.in||n.$in||[n];for(const a of s){const u=t.get(a);u&&i.push(u)}return i}function _l(e,t,n){let r="";return e!==void 0&&(r+="e"),t!==void 0&&(r+="a"),n!==void 0&&(r+="v"),r}function vl(e,[t,n,r]){var o,i;switch(_l(t,n,r)){case"e":{const a=e.eav.get(t);return J(a,2)}case"ea":{const a=(o=e.eav.get(t))===null||o===void 0?void 0:o.get(n);return J(a,1)}case"eav":{const a=(i=e.eav.get(t))===null||i===void 0?void 0:i.get(n);return a?rn(e,a,r):[]}case"ev":{const a=e.eav.get(t);if(!a)return[];const u=[];for(const c of a.values())u.push(...rn(e,c,r));return u}case"a":{const a=e.aev.get(n);return J(a,2)}case"av":{const a=e.aev.get(n);if(!a)return[];const u=[];for(const c of a.values())u.push(...rn(e,c,r));return u}case"v":{const a=[];for(const u of e.eav.values())for(const c of u.values())a.push(...rn(e,c,r));return a}default:return J(e.eav,3)}}function yl(e,t,n){var r;const o={};for(const[i,s]of t.entries()){const a=(r=e.eav.get(n))===null||r===void 0?void 0:r.get(s.id),u=J(a,1);for(const c of u)o[i]=c[2]}return o}function pt(e,t,n){var r;return(r=e.attrIndexes.forwardIdents.get(t))===null||r===void 0?void 0:r.get(n)}function ma(e,t,n){var r;return(r=e.attrIndexes.revIdents.get(t))===null||r===void 0?void 0:r.get(n)}function gl(e,t){return e.attrIndexes.blobAttrs.get(t)}function ml(e,t){var n;const r=e.attrIndexes.primaryKeys.get(t);return r||((n=e.attrIndexes.forwardIdents.get(t))===null||n===void 0?void 0:n.get("id"))}function bl(e,t){const n=Vt(e,t);if(!n)return;const[r,o,i]=n;if(Wt(e.attrs,o))return In(e.eav,[r,o])}function wl(e,t){const n=t.filter(([r,...o])=>{var i;if(r!=="add-triple"&&r!=="deep-merge-triple")return!0;const s=(i=o[3])===null||i===void 0?void 0:i.mode;if(s!=="create"&&s!=="update")return!0;const a=bl(e,o);return!(s==="create"&&a||s==="update"&&!a)});return Cr(e,r=>{n.forEach(o=>{pl(r,o)})})}function Sl(e){return typeof e=="string"&&e.startsWith("?")}function Ol(e,t,n){if(n.hasOwnProperty(e)){const r=n[e];return ba(r,t,n)}return Object.assign(Object.assign({},n),{[e]:t})}function bi(e,t,n){return e===t?n:null}function kl(e){switch(typeof e){case"string":return e.startsWith("?")?Ol:bi;default:return bi}}const xl=["in","$in","$not","$isNull","$comparator"];function Cl(e){for(const t of xl)if(e.hasOwnProperty(t))return!0;return!1}function ba(e,t,n){return n?typeof e=="object"?Cl(e)?n:null:kl(e)(e,t,n):null}function $l(e,t,n){return e.reduce((r,o,i)=>{const s=t[i];return ba(o,s,r)},n)}function El(e,t,n){return jl(e,t,n).map(r=>$l(t,r,n)).filter(r=>r)}function Ml(e,t,n){return t.or?t.or.patterns.flatMap(r=>Mr(e,r,n)):t.and?t.and.patterns.reduce((r,o)=>Mr(e,o,r),n):n.flatMap(r=>El(e,t,r))}function Mr(e,t,n=[{}]){return t.reduce((r,o)=>Ml(e,o,r),n)}function So(e,t){return Array.isArray(t)?t.map(n=>So(e,n)):Sl(t)?e[t]:t}function Pl(e,{find:t,where:n}){return Mr(e,n).map(o=>So(o,t))}function jl(e,t,n){return vl(e,So(n,t))}const W=[];for(let e=0;e<256;++e)W.push((e+256).toString(16).slice(1));function Tl(e,t=0){return(W[e[t+0]]+W[e[t+1]]+W[e[t+2]]+W[e[t+3]]+"-"+W[e[t+4]]+W[e[t+5]]+"-"+W[e[t+6]]+W[e[t+7]]+"-"+W[e[t+8]]+W[e[t+9]]+"-"+W[e[t+10]]+W[e[t+11]]+W[e[t+12]]+W[e[t+13]]+W[e[t+14]]+W[e[t+15]]).toLowerCase()}let rr;const Rl=new Uint8Array(16);function Al(){if(!rr){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");rr=crypto.getRandomValues.bind(crypto)}return rr(Rl)}const Il=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wi={randomUUID:Il};function Dl(e,t,n){var o;if(wi.randomUUID&&!e)return wi.randomUUID();e=e||{};const r=e.random??((o=e.rng)==null?void 0:o.call(e))??Al();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Tl(r)}function Si(e){const t=e.replace(/-/g,""),n=[];for(let r=0;r<t.length;r+=2)n.push(parseInt(t.substring(r,r+2),16));return n}function Ul(e,t){for(let n=0;n<e.length;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0}function Ll(e,t){return Ul(Si(e),Si(t))}function L(){return Dl()}let Nl=0;function Et(e){return Dn(`_${e}`,Nl++)}function Dn(e,t){return`?${e}-${t}`}class _t extends Error{constructor(t){super(t),this.name="AttrNotFoundError"}}function zl(e,t){const n=ml(e,t);if(!n)throw new _t(`Could not find id attr for ${t}`);return n}function Oi(e,t,n,r){return[ql(e,t,n,r)]}function ql(e,t,n,r){return[e(n,r),zl(t,n).id,e(n,r),e("time",r)]}function Fl(e,t,n){return e.map(r=>r===t?n:r)}function wa(e,t,n,r,o){const i=pt(t,n,o),s=ma(t,n,o),a=i||s;if(!a)throw new _t(`Could not find attr for ${[n,o]}`);if(a["value-type"]!=="ref")throw new Error(`Attr ${a.id} is not a ref`);const[u,c]=a["forward-identity"],[f,l]=a["reverse-identity"],d=r+1,h=i?[e(c,r),a.id,e(l,d),Et("time")]:[e(c,d),a.id,e(l,r),Et("time")];return[i?l:c,d,h,a,!!i]}function ki(e,t){if(typeof t!="string")return function(s){return!1};const r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/%/g,".*").replace(/_/g,"."),o=new RegExp(`^${r}$`,e?void 0:"i");return function(s){return typeof s!="string"?!1:o.test(s)}}function Wl(e,t){if(typeof t!="object"||t.hasOwnProperty("$in")||t.hasOwnProperty("in"))return t;const n=e["checked-data-type"]==="date";if(t.hasOwnProperty("$gt"))return{$comparator:!0,$op:n?function(o){return new Date(o[2])>new Date(t.$gt)}:function(o){return o[2]>t.$gt}};if(t.hasOwnProperty("$gte"))return{$comparator:!0,$op:n?function(o){return new Date(o[2])>=new Date(t.$gte)}:function(o){return o[2]>=t.$gte}};if(t.hasOwnProperty("$lt"))return{$comparator:!0,$op:n?function(o){return new Date(o[2])<new Date(t.$lt)}:function(o){return o[2]<t.$lt}};if(t.hasOwnProperty("$lte"))return{$comparator:!0,$op:n?function(o){return new Date(o[2])<=new Date(t.$lte)}:function(o){return o[2]<=t.$lte}};if(t.hasOwnProperty("$like")){const r=ki(!0,t.$like);return{$comparator:!0,$op:function(i){return r(i[2])}}}if(t.hasOwnProperty("$ilike")){const r=ki(!1,t.$ilike);return{$comparator:!0,$op:function(i){return r(i[2])}}}return t}function Vl(e,t,n,r,o,i){const s=pt(t,n,o),a=ma(t,n,o),u=s||a;if(!u)throw new _t(`No attr for etype = ${n} label = ${o}`);if(i!=null&&i.hasOwnProperty("$isNull")){const c=pt(t,n,"id");if(!c)throw new _t(`No attr for etype = ${n} label = id`);return[e(n,r),c.id,{$isNull:{attrId:u.id,isNull:i.$isNull,reverse:!s}},Et("time")]}return s?[e(n,r),u.id,Wl(u,i),Et("time")]:[i,u.id,e(n,r),Et("time")]}function Bl(e,t,n,r,o){const[i,s,a]=o.reduce((u,c)=>{const[f,l,d]=u,[h,_,p]=wa(e,t,f,l,c);return[h,_,[...d,p]]},[n,r,[]]);return[i,s,a]}function Pr(e,t,n,r,o,i){const s=o.slice(0,o.length-1),a=o[o.length-1],[u,c,f]=Bl(e,t,n,r,s),l=Vl(e,t,u,c,a,i);return f.concat([l])}function Hl(e,t){return t?[t].concat(e):e}function Ql([e,t]){return e==="or"&&Array.isArray(t)}function Kl([e,t]){return e==="and"&&Array.isArray(t)}function Jl(e,t,n){return(r,o)=>{const i=e(r,o);return t==i?i:`${i}-${n}`}}function xi(e,t,n,r,o,i){const s=e(r,o),a=i.map((u,c)=>{const f=Jl(e,s,c);return Sa(f,n,r,o,u)});return{[t]:{patterns:a,joinSym:s}}}function Yl(e){const t=[];for(let n=1;n<=e.length;n++)t.push(e.slice(0,n));return t}function Ci(e,t,n,r,o){return Yl(o).map(i=>Pr(e,t,n,r,i,{$isNull:!0}))}function Sa(e,t,n,r,o){return Object.entries(o).flatMap(([i,s])=>{if(Ql([i,s]))return xi(e,"or",t,n,r,s);if(Kl([i,s]))return xi(e,"and",t,n,r,s);if(i==="$entityIdStartsWith")return[];const a=i.split(".");if(s!=null&&s.hasOwnProperty("$not")){const u=Pr(e,t,n,r,a,s),c=Ci(e,t,n,r,a);return[{or:{patterns:[u,...c],joinSym:e(n,r)}}]}return s!=null&&s.hasOwnProperty("$isNull")&&s.$isNull===!0&&a.length>1?[{or:{patterns:Ci(e,t,n,r,a),joinSym:e(n,r)}}]:Pr(e,t,n,r,a,s)})}function Gl(e,t,n,r){const o=Dn;return r?Sa(o,e,t,n,r).concat(Oi(o,e,t,n)):Oi(o,e,t,n)}function Zl(e,t,n){return[e(t,n),e("time",n)]}function Xl(e,t,n,r,o,i){const[s,a,u,c,f]=wa(e,t,n,r,o),l=Fl(u,e(n,r),i);return[s,a,l,c,f]}function ef(e,t,{etype:n,level:r,form:o},i){const s=Object.keys(o).filter(a=>a!=="$");return s.length?Object.entries(i).map(function([u,c]){return s.map(function(d){var h,_,p;const y=!!(t.cardinalityInference&&(!((p=(_=(h=t.linkIndex)===null||h===void 0?void 0:h[n])===null||_===void 0?void 0:_[d])===null||p===void 0)&&p.isSingular));try{const[v,g,m]=Xl(e,t,n,r,d,u),w=Oa(t,{etype:v,level:g,form:o[d],join:m}),b=y?w[0]:w;return{[d]:b}}catch(v){if(v instanceof _t)return{[d]:y?void 0:[]};throw v}}).reduce(function(d,h){return Object.assign(Object.assign({},d),h)},c)}):Object.values(i)}function kn([e,t],[n,r]){return t===r||t==null&&r==null?Ll(e,n):r==null?1:t==null?-1:t>r?1:-1}function jr(e){return e==null?e:new Date(e).getTime()}function tf(e,t,n,r){var o;const[i,s,a,u]=e,c=n==="desc"?1:-1;if(((o=t["forward-identity"])===null||o===void 0?void 0:o[2])==="id")return kn(r,[i,u])===c;const[f,l]=r,d=t["checked-data-type"]==="date"?jr(l):l,h=t["checked-data-type"]==="date"?jr(a):a;return kn([f,d],[i,h])===c}function nf(e,t){const n=t[1];return e.attrs[n]}function rf(e,t,n){const r=Object.keys(n)[0];return pt(e,t,r)}function of(e,t,n,r){if(n)return nf(e,n);if(r)return rf(e,t,r)}function sf(e,t,n){var r,o;if(!Array.isArray(n.fields))return gl(e,t);const i=new Map;for(const s of n.fields){const a=pt(e,t,s),u=(r=a==null?void 0:a["forward-identity"])===null||r===void 0?void 0:r[2];u&&bo(a)&&i.set(u,a)}if(!i.has("id")){const s=pt(e,t,"id"),a=(o=s==null?void 0:s["forward-identity"])===null||o===void 0?void 0:o[2];a&&i.set(a,s)}return i}function af(e,t,n,r,o,i){var s;let a=Pl(e,i);const u=r==null?void 0:r["start-cursor"],c=of(e,t,u,o);if(c&&((s=c==null?void 0:c["forward-identity"])===null||s===void 0?void 0:s[2])!=="id"){const d=c["checked-data-type"]==="date",h=c.id;a=a.map(([_])=>{var p,y,v,g,m;let w=(m=(g=(v=(y=(p=e.eav.get(_))===null||p===void 0?void 0:p.get(h))===null||y===void 0?void 0:y.values())===null||v===void 0?void 0:v.next())===null||g===void 0?void 0:g.value)===null||m===void 0?void 0:m[2];return d&&(w=jr(w)),[_,w]})}a.sort(n==="asc"?function(h,_){return kn(h,_)}:function(h,_){return kn(_,h)});let f={};const l=sf(e,t,i);for(const d of a){const[h]=d;if(f[h]||u&&c&&tf(u,c,n,d))continue;const _=yl(e,l,h);_&&(f[h]=_)}return f}function uf(e){var t;const n=(t=e.$)===null||t===void 0?void 0:t.order;return n&&n[Object.keys(n)[0]]||"asc"}function cf(e,{etype:t,level:n,form:r,join:o,pageInfo:i}){var s,a,u,c,f,l,d,h,_;const p=((s=r.$)===null||s===void 0?void 0:s.limit)||((a=r.$)===null||a===void 0?void 0:a.first)||((u=r.$)===null||u===void 0?void 0:u.last),y=(c=r.$)===null||c===void 0?void 0:c.offset,v=(f=r.$)===null||f===void 0?void 0:f.before,g=(l=r.$)===null||l===void 0?void 0:l.after,m=(d=r.$)===null||d===void 0?void 0:d.order,w=(h=r.$)===null||h===void 0?void 0:h.fields;if((y||v||g)&&(!i||!i["start-cursor"]))return[];const b=Hl(Gl(e,t,n,(_=r.$)===null||_===void 0?void 0:_.where),o),k=Zl(Dn,t,n),S=af(e,t,uf(r),i,m,{where:b,find:k,fields:w});if(p!=null){const x=Object.entries(S);return x.length<=p?S:Object.fromEntries(x.slice(0,p))}return S}function lf(e,t){try{return cf(e,t)}catch(n){if(n instanceof _t)return{};throw n}}function Oa(e,t){const n=lf(e,t);return ef(Dn,e,t,n)}function ff(e){const t={};for(const[n,r]of Object.entries(e))t[n]={startCursor:r["start-cursor"],endCursor:r["end-cursor"],hasNextPage:r["has-next-page?"],hasPreviousPage:r["has-previous-page?"]};return t}function df({store:e,pageInfo:t,aggregate:n},r){const i={data:Object.keys(r).reduce(function(a,u){return n!=null&&n[u]||u==="$$ruleParams"||(a[u]=Oa(e,{etype:u,form:r[u],level:0,pageInfo:t==null?void 0:t[u]})),a},{})};return t&&(i.pageInfo=ff(t)),n&&(i.aggregate=n),i}function hf(){const t={__etype:1,__ops:1,create:1,update:1,link:1,unlink:1,delete:1,merge:1,ruleParams:1};return new Set(Object.keys(t))}const pf=hf();function Tr(e,t,n){const r={__etype:e,__ops:n};return new Proxy(r,{get:(o,i)=>{if(i==="__ops")return n;if(i==="__etype")return e;if(pf.has(i))return(s,a)=>Tr(e,t,[...n,a?[i,e,t,s,a]:[i,e,t,s]])}})}function Rr(e){return e.startsWith("lookup__")}function ka(e){const[t,n,...r]=e.split("__");return[n,JSON.parse(r.join("__"))]}function _f(e){return new Proxy({__etype:e},{get(t,n){if(n==="__etype")return e;const r=n;return Rr(r)?Tr(e,ka(r),[]):Tr(e,r,[])}})}function xa(){return new Proxy({},{get(e,t){return _f(t)}})}xa();function vf(e){return e.__ops}function yf(e,t){const{attrIdMap:n,refSwapAttrIds:r}=e,o=[];for(const s of t){const a=n[s];if(a)o.push(a);else if(Array.isArray(s)&&s.length==2&&n[s[0]]){const[u,c]=s;o.push([n[u],c])}else o.push(s)}const[i]=t;if((i==="add-triple"||i==="retract-triple")&&r.has(t[2])){const s=o[1];o[1]=o[3],o[3]=s}return o}function V(e,t,n){return Object.values(e).find(r=>{const[o,i,s]=r["forward-identity"];return i===t&&s===n})}function Ze(e,t,n){return Object.values(e).find(r=>{const o=r["reverse-identity"];if(!o)return!1;const[i,s,a]=o;return s===t&&a===n})}function gf(e){if(Array.isArray(e))return e;const t=Object.entries(e);if(t.length!==1)throw new Error("lookup must be an object with a single unique attr and value.");return t[0]}function Ar(e,t,n){return n.indexOf(".")!==-1&&!V(e,t,n)}function Ir(e){const[t,n,...r]=e.split(".");if(r.length>0||n!=="id")throw new Error(`${e} is not a valid lookup attribute.`);return t}function mf(e,t,n){if(!Ar(e,t,n))return V(e,t,n);const r=Ir(n),o=V(e,t,r)||Ze(e,t,r);if(o&&o["value-type"]!=="ref")throw new Error(`${n} does not reference a valid link attribute.`);return o}function Dr(e){return typeof e=="string"&&!Rr(e)?null:typeof e=="string"&&Rr(e)?ka(e):gf(e)}function Y(e,t,n){const r=Dr(n);if(r===null)return n;const[o,i]=r,s=mf(e,t,o);if(!s||!s["unique?"])throw new Error(`${o} is not a unique attribute.`);return[s.id,i]}function Ca(e,t,n,r){const o=Y(e,t,n);return Array.isArray(o)?[["add-triple",o,V(e,t,"id").id,o]].concat(r):r}function bf({attrs:e},[t,n,r]){const o=Object.entries(r).flatMap(([i,s])=>{const a=Array.isArray(s)?s:[s],u=V(e,t,i),c=Ze(e,t,i);return a.map(f=>u?["add-triple",Y(e,t,n),u.id,Y(e,u["reverse-identity"][1],f)]:["add-triple",Y(e,c["forward-identity"][1],f),c.id,Y(e,t,n)])});return Ca(e,t,n,o)}function wf({attrs:e},[t,n,r]){const o=Object.entries(r).flatMap(([i,s])=>{const a=Array.isArray(s)?s:[s],u=V(e,t,i),c=Ze(e,t,i);return a.map(f=>u?["retract-triple",Y(e,t,n),u.id,Y(e,u["reverse-identity"][1],f)]:["retract-triple",Y(e,c["forward-identity"][1],f),c.id,Y(e,t,n)])});return Ca(e,t,n,o)}function Sf(e,t,n){if(Array.isArray(n)){const[r,o]=n;for(const i of e||[]){const s=i==null?void 0:i.aev.get(r);if(s){for(const[a,u,c]of J(s,2))if(c===o)return!0}}}else for(const r of e||[]){const o=r==null?void 0:r.eav.get(n);if(o){for(const i of o.keys())if(r.attrs[i]["forward-identity"][1]==t)return!0}}return!1}function $a({stores:e,attrs:t},[n,r,o,i]){return(i==null?void 0:i.upsert)===!1?{mode:"update"}:(i==null?void 0:i.upsert)===!0?null:Sf(e,n,r)?{mode:"update"}:null}function Of(e,t){const{stores:n,attrs:r}=e,[o,i,s,a]=t,u=go(s),c=Y(r,o,i);return[["id",c]].concat(Object.entries(u)).map(([l,d])=>{const h=V(r,o,l);return h["checked-data-type"]==="date"&&e.useDateObjects&&(d=An(d)),["add-triple",c,h.id,d,{mode:"create"}]})}function kf(e,t){const{stores:n,attrs:r}=e,[o,i,s,a]=t,u=go(s),c=Y(r,o,i),f=$a(e,[o,c,s,a]);return[["id",c]].concat(Object.entries(u)).map(([d,h])=>{const _=V(r,o,d);return _["checked-data-type"]==="date"&&e.useDateObjects&&(h=An(h)),["add-triple",c,_.id,h,...f?[f]:[]]})}function xf({attrs:e},[t,n]){return[["delete-entity",Y(e,t,n),t]]}function Cf(e,t){const{stores:n,attrs:r}=e,[o,i,s,a]=t,u=go(s),c=Y(r,o,i),f=$a(e,[o,c,s,a]),l=Object.entries(u).map(([h,_])=>{const p=V(r,o,h);return["deep-merge-triple",c,p.id,_,...f?[f]:[]]});return[["add-triple",c,V(r,o,"id").id,c,...f?[f]:[]]].concat(l)}function $f({attrs:e},[t,n,r]){return[["rule-params",Y(e,t,n),t,r]]}function Ef(e){const[t,n,r,o,i]=e;if(!o)return e;const s=Object.assign({},o);return delete s.id,[t,n,r,s,...i?[i]:[]]}function Mf(e,t){const[n,...r]=Ef(t);switch(n){case"merge":return Cf(e,r);case"create":return Of(e,r);case"update":return kf(e,r);case"link":return bf(e,r);case"unlink":return wf(e,r);case"delete":return xf(e,r);case"ruleParams":return $f(e,r);default:throw new Error(`unsupported action ${n}`)}}function Pf(e){switch(e){case"string":case"date":case"boolean":case"number":return e;default:return}}function jf(e,t,n){var r,o;const i=(o=(r=e.entities[t])===null||r===void 0?void 0:r.attrs)===null||o===void 0?void 0:o[n];if(n==="id")return null;if(!i)throw new Error(`${t}.${n} does not exist in your schema`);const{unique:s,indexed:a}=i==null?void 0:i.config,u=Pf(i==null?void 0:i.valueType);return{"index?":a,"unique?":s,"checked-data-type":u}}function or(e,t,n,r){const o=e?jf(e,t,n):null,i=L(),a=[L(),t,n];return Object.assign(Object.assign({id:i,"forward-identity":a,"value-type":"blob",cardinality:"one","unique?":!1,"index?":!1,isUnsynced:!0},o||{}),r||{})}function Tf(e,t,n){return Object.values(e.links).find(o=>o.forward.on===t&&o.forward.label===n||o.reverse.on===t&&o.reverse.label===n)}function Rf(e,t,n){const r=Tf(e,t,n);if(!r)throw new Error(`Couldn't find the link ${t}.${n} in your schema`);const{forward:o,reverse:i}=r;return{"forward-identity":[L(),o.on,o.label],"reverse-identity":[L(),i.on,i.label],cardinality:o.has==="one"?"one":"many","unique?":i.has==="one","on-delete":o.onDelete,"on-delete-reverse":i.onDelete}}function $i(e,t,n,r){const o=e?Rf(e,t,n):null,i=L(),s=[L(),t,n],a=[L(),n,t];return Object.assign(Object.assign({id:i,"forward-identity":s,"reverse-identity":a,"value-type":"ref",cardinality:"many","unique?":!1,"index?":!1,isUnsynced:!0},o||{}),r||{})}const Af=new Set(["create","update","merge","link","unlink"]),If=new Set(["link","unlink"]),Df=new Set(["create","update","merge"]),Uf=new Set(["link","unlink","create","update","merge","delete","ruleParams"]),Ur={"unique?":!0,"index?":!0},Lf=Object.assign(Object.assign({},Ur),{cardinality:"one"});function Nf(e){const t=[],[n,r,o,i]=e;if(!Uf.has(n))return t;const s=Dr(o);if(s&&t.push({etype:r,lookupPair:s}),n==="link")for(const[a,u]of Object.entries(i)){const c=Array.isArray(u)?u:[u];for(const f of c){const l=Dr(f);l&&t.push({etype:r,lookupPair:l,linkLabel:a})}}return t}function zf({attrs:e,schema:t},n){var r,o;const[i,s,a]=[new Set,Object.assign({},e),[]];function u(l){s[l.id]=l,a.push(["add-attr",l]),i.add(l.id)}function c(l){l!=null&&l.isUnsynced&&!i.has(l.id)&&(a.push(["add-attr",l]),i.add(l.id))}function f(l,d){const h=V(s,l,d),_=Ze(s,l,d);c(h),c(_),!h&&!_&&u($i(t,l,d,Lf))}for(const l of n)for(const{etype:d,lookupPair:h,linkLabel:_}of Nf(l)){const p=h[0];if(_){f(d,_);const y=V(s,d,_),v=Ze(s,d,_);c(y),c(v);const g=((r=y==null?void 0:y["reverse-identity"])===null||r===void 0?void 0:r[1])||((o=v==null?void 0:v["forward-identity"])===null||o===void 0?void 0:o[1])||_;if(Ar(s,g,p))f(g,Ir(p));else{const m=V(s,g,p);m||u(or(t,g,p,Ur)),c(m)}}else if(Ar(s,d,p))f(d,Ir(p));else{const y=V(s,d,p);y||u(or(t,d,p,Ur)),c(y)}}for(const l of n){const[d,h,_,p]=l;if(Af.has(d)){const y=Object.keys(p);y.push("id");for(const v of y){const g=V(s,h,v);if(c(g),Df.has(d)&&(g||u(or(t,h,v,v==="id"?{"unique?":!0}:null))),If.has(d)){const m=Ze(s,h,v);!g&&!m&&u($i(t,h,v)),c(m)}}}}return[s,a]}function qf(e,t){const r=(Array.isArray(t)?t:[t]).flatMap(u=>vf(u)),[o,i]=zf(e,r),s=Object.assign(Object.assign({},e),{attrs:o}),a=r.flatMap(u=>Mf(s,u));return[...i,...a]}var Ei=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(f){try{c(r.next(f))}catch(l){s(l)}}function u(f){try{c(r.throw(f))}catch(l){s(l)}}function c(f){f.done?i(f.value):o(f.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};class Ea{constructor(t){this.dbName=t,this._storeName="kv",this._dbPromise=this._init()}_init(){return new Promise((t,n)=>{const r=indexedDB.open(this.dbName,1);r.onerror=o=>{n(o)},r.onsuccess=o=>{t(o.target.result)},r.onupgradeneeded=o=>{o.target.result.createObjectStore(this._storeName)}})}getItem(t){return Ei(this,void 0,void 0,function*(){const n=yield this._dbPromise;return new Promise((r,o)=>{const a=n.transaction([this._storeName],"readonly").objectStore(this._storeName).get(t);a.onerror=u=>{o(u)},a.onsuccess=u=>{a.result?r(a.result):r(null)}})})}setItem(t,n){return Ei(this,void 0,void 0,function*(){const r=yield this._dbPromise;return new Promise((o,i)=>{const u=r.transaction([this._storeName],"readwrite").objectStore(this._storeName).put(n,t);u.onerror=c=>{i(c)},u.onsuccess=c=>{o()}})})}}var Ff=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(f){try{c(r.next(f))}catch(l){s(l)}}function u(f){try{c(r.throw(f))}catch(l){s(l)}}function c(f){f.done?i(f.value):o(f.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};class Ma{static getIsOnline(){return Ff(this,void 0,void 0,function*(){return navigator.onLine})}static listen(t){const n=()=>{t(!0)},r=()=>{t(!1)};return addEventListener("online",n),addEventListener("offline",r),()=>{removeEventListener("online",n),removeEventListener("offline",r)}}}var Wf=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(f){try{c(r.next(f))}catch(l){s(l)}}function u(f){try{c(r.throw(f))}catch(l){s(l)}}function c(f){f.done?i(f.value):o(f.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};class Oo extends Error{constructor(t){var n;const r=((n=t.body)===null||n===void 0?void 0:n.message)||`API Error (${t.status})`;super(r);const o=new.target.prototype;Object.setPrototypeOf&&Object.setPrototypeOf(this,o),Error.captureStackTrace&&Error.captureStackTrace(this,Oo),this.name="InstantAPIError",this.status=t.status,this.body=t.body}get[Symbol.toStringTag](){return"InstantAPIError"}}function Se(e,t){return Wf(this,void 0,void 0,function*(){const n=yield fetch(e,t),r=yield n.json();return n.status===200?Promise.resolve(r):Promise.reject(new Oo({status:n.status,body:r}))})}var Bt=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(f){try{c(r.next(f))}catch(l){s(l)}}function u(f){try{c(r.throw(f))}catch(l){s(l)}}function c(f){f.done?i(f.value):o(f.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};function Vf({apiURI:e,appId:t,email:n}){return Se(`${e}/runtime/auth/send_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":t,email:n})})}function Bf(e){return Bt(this,arguments,void 0,function*({apiURI:t,appId:n,email:r,code:o}){return yield Se(`${t}/runtime/auth/verify_magic_code`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":n,email:r,code:o})})})}function Hf(e){return Bt(this,arguments,void 0,function*({apiURI:t,appId:n,refreshToken:r}){return yield Se(`${t}/runtime/auth/verify_refresh_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({"app-id":n,"refresh-token":r})})})}function Mi(e){return Bt(this,arguments,void 0,function*({apiURI:t,appId:n,code:r,codeVerifier:o}){return yield Se(`${t}/runtime/oauth/token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:n,code:r,code_verifier:o})})})}function Qf(e){return Bt(this,arguments,void 0,function*({apiURI:t,appId:n,nonce:r,idToken:o,clientName:i,refreshToken:s}){return yield Se(`${t}/runtime/oauth/id_token`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:n,nonce:r,id_token:o,client_name:i,refresh_token:s})})})}function Kf(e){return Bt(this,arguments,void 0,function*({apiURI:t,appId:n,refreshToken:r}){return yield Se(`${t}/runtime/signout`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({app_id:n,refresh_token:r})})})}var Ht=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(f){try{c(r.next(f))}catch(l){s(l)}}function u(f){try{c(r.throw(f))}catch(l){s(l)}}function c(f){f.done?i(f.value):o(f.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};function Jf(e){return Ht(this,arguments,void 0,function*({apiURI:t,appId:n,path:r,file:o,refreshToken:i,contentType:s,contentDisposition:a}){const u={app_id:n,path:r,authorization:`Bearer ${i}`,"content-type":s||o.type};return a&&(u["content-disposition"]=a),yield Se(`${t}/storage/upload`,{method:"PUT",headers:u,body:o})})}function Yf(e){return Ht(this,arguments,void 0,function*({apiURI:t,appId:n,path:r,refreshToken:o}){const{data:i}=yield Se(`${t}/storage/files?app_id=${n}&filename=${encodeURIComponent(r)}`,{method:"DELETE",headers:{"content-type":"application/json",authorization:`Bearer ${o}`}});return i})}function Gf(e){return Ht(this,arguments,void 0,function*({apiURI:t,appId:n,fileName:r,refreshToken:o,metadata:i={}}){const{data:s}=yield Se(`${t}/storage/signed-upload-url`,{method:"POST",headers:{"content-type":"application/json",authorization:`Bearer ${o}`},body:JSON.stringify({app_id:n,filename:r})});return s})}function Zf(e,t){return Ht(this,void 0,void 0,function*(){return(yield fetch(e,{method:"PUT",body:t,headers:{"Content-Type":t.type}})).ok})}function Xf(e){return Ht(this,arguments,void 0,function*({apiURI:t,appId:n,path:r,refreshToken:o}){const{data:i}=yield Se(`${t}/storage/signed-download-url?app_id=${n}&filename=${encodeURIComponent(r)}`,{method:"GET",headers:{"content-type":"application/json",authorization:`Bearer ${o}`}});return i})}let ko=!1,Pa=!1,ja=!1;typeof window<"u"&&typeof window.localStorage<"u"&&(ko=!!window.localStorage.getItem("devBackend"),Pa=!!window.localStorage.getItem("__instantLogging"),ja=!!window.localStorage.getItem("__devtoolLocalDash"));function Pi(e,t){if(!t)return e;const n={};return t.forEach(r=>{n[r]=e[r]}),n}function ed(e,t,n){var r,o;const i={peers:{}};if(t&&"user"in t?t.user:!0){const a=Pi((r=e.user)!==null&&r!==void 0?r:{},t==null?void 0:t.keys);i.user=Object.assign(Object.assign({},a),{peerId:n})}for(const a of Object.keys((o=e.peers)!==null&&o!==void 0?o:{})){const u=(t==null?void 0:t.peers)===void 0,c=Array.isArray(t==null?void 0:t.peers)&&(t==null?void 0:t.peers.includes(a));if(u||c){const f=Pi(e.peers[a],t==null?void 0:t.keys);i.peers[a]=Object.assign(Object.assign({},f),{peerId:a})}}return i}function td(e,t){if(e.isLoading!==t.isLoading||e.error!==t.error||(e.user||t.user)&&(!e.user||!t.user||!gi(e.user,t.user))||!la(e.peers,t.peers))return!0;for(const r of Object.keys(e.peers))if(!gi(e.peers[r],t.peers[r]))return!0;return!1}class ji{constructor(){this.promise=new Promise((t,n)=>{this._resolve=t,this._reject=n})}resolve(t){this._resolve(t)}reject(t){this._reject(t)}}var on=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(f){try{c(r.next(f))}catch(l){s(l)}}function u(f){try{c(r.throw(f))}catch(l){s(l)}}function c(f){f.done?i(f.value):o(f.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};class Ti{constructor(t,n,r,o,i=u=>JSON.stringify(u),s=u=>JSON.parse(u),a=100){this._subs=[],this._persister=t,this._key=n,this._onMerge=o,this._loadedCbs=[],this._isLoading=!0,this.currentValue=r,this.toJSON=i,this.fromJSON=s,this._saveThrottleMs=a,this._pendingSaveCbs=[],this._version=0,this._load()}_load(){return on(this,void 0,void 0,function*(){const t=this.fromJSON(yield this._persister.getItem(this._key));this._isLoading=!1,this._onMerge(t,this.currentValue);for(const n of this._loadedCbs)n()})}waitForLoaded(){return on(this,void 0,void 0,function*(){if(!this._isLoading)return;yield new Promise(n=>{this._loadedCbs.push(n)})})}isLoading(){return this._isLoading}version(){return this._version}waitForSync(){return on(this,void 0,void 0,function*(){if(!this._nextSave)return;yield new Promise(n=>{this._pendingSaveCbs.push(n)})})}_writeToStorage(){this._persister.setItem(this._key,this.toJSON(this.currentValue));for(const t of this._pendingSaveCbs)t();this._pendingSaveCbs.length=0}flush(){return on(this,void 0,void 0,function*(){this._nextSave&&(clearTimeout(this._nextSave),this._writeToStorage())})}_enqueuePersist(t){if(this._nextSave){t&&this._pendingSaveCbs.push(t);return}this._nextSave=setTimeout(()=>{this._nextSave=null,this._writeToStorage()},this._saveThrottleMs)}set(t,n){this._version++,this.currentValue=t(this.currentValue),this._isLoading?this._loadedCbs.push(()=>this._enqueuePersist(n)):this._enqueuePersist(n);for(const r of this._subs)r(this.currentValue)}subscribe(t){return this._subs.push(t),t(this.currentValue),()=>{this._subs=this._subs.filter(n=>n!==t)}}}function Ta(e,t=[]){e.forEach(n=>{const{data:r}=n,{"datalog-result":o}=r,{"join-rows":i}=o;for(const s of i)for(const a of s)t.push(a);Ta(n["child-nodes"],t)})}function Ri(e){const t=[];return Ta(e,t),t}function Ai(e){return Object.values(e.links).reduce((t,n)=>{var r,o,i,s;return(r=t[i=n.forward.on])!==null&&r!==void 0||(t[i]={}),t[n.forward.on][n.forward.label]={isForward:!0,isSingular:n.forward.has==="one",link:n},(o=t[s=n.reverse.on])!==null&&o!==void 0||(t[s]={}),t[n.reverse.on][n.reverse.label]={isForward:!1,isSingular:n.reverse.has==="one",link:n},t},{})}const Ra="v0.20.12";function nd(e){return{info:e?console.info.bind(console):()=>{},debug:e?console.debug.bind(console):()=>{},error:e?console.error.bind(console):()=>{}}}var q=function(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(f){try{c(r.next(f))}catch(l){s(l)}}function u(f){try{c(r.throw(f))}catch(l){s(l)}}function c(f){f.done?i(f.value):o(f.value).then(a,u)}c((r=r.apply(e,t||[])).next())})};const xe={CONNECTING:"connecting",OPENED:"opened",AUTHENTICATED:"authenticated",CLOSED:"closed",ERRORED:"errored"},rd=3e4,od=3e4,id=0,Ii=1,sd={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"},ir="_instant_oauth_redirect",sr="currentUser";let ad=0;function ud(e){const t=new WebSocket(e);return t._id=ad++,t}function cd(){return typeof window<"u"||typeof chrome<"u"}const Di={"set-presence":!0,"set-presence-ok":!0,"refresh-presence":!0,"patch-presence":!0};function ld(e,t){var n;const r=JSON.parse(e);for(const o in r){const i=r[o];if(!((n=i==null?void 0:i.result)===null||n===void 0)&&n.store){const s=i.result.store;i.result.store=sl(Object.assign(Object.assign({},s),{useDateObjects:t}))}}return r}function fd(e){var t;const n={};for(const r in e){const o=e[r],i=Object.assign({},o);!((t=o.result)===null||t===void 0)&&t.store&&(i.result=Object.assign(Object.assign({},o.result),{store:il(o.result.store)})),n[r]=i}return JSON.stringify(n)}function Ui(e){return[...e].sort((t,n)=>{const[r,o]=t,[i,s]=n,a=o.order||0,u=s.order||0;return a==u?r<i?-1:r>i?1:0:a-u})}class dd{constructor(t,n=Ea,r=Ma,o){var i;this._isOnline=!0,this._isShutdown=!1,this.status=xe.CONNECTING,this.queryCbs={},this.queryOnceDfds={},this.authCbs=[],this.attrsCbs=[],this.mutationErrorCbs=[],this.connectionStatusCbs=[],this.mutationDeferredStore=new Map,this._reconnectTimeoutId=null,this._reconnectTimeoutMs=0,this._localIdPromises={},this._errorMessage=null,this._oauthCallbackResponse=null,this._linkIndex=null,this._rooms={},this._roomsPendingLeave={},this._presence={},this._broadcastQueue=[],this._broadcastSubs={},this._currentUserCached={isLoading:!0,error:void 0,user:void 0},this._beforeUnloadCbs=[],this._dataForQueryCache={},this._onMergeQuerySubs=(s,a)=>{const u=s||{},c=Object.assign({},a);Object.entries(a).forEach(([l,d])=>{var h;const _=(h=u==null?void 0:u[l])===null||h===void 0?void 0:h.result,p=d.result;_&&!p&&(c[l].result=_)}),Object.keys(u).filter(l=>!a[l]).sort((l,d)=>{var h,_;const p=((h=u[l])===null||h===void 0?void 0:h.lastAccessed)||0;return(((_=u[d])===null||_===void 0?void 0:_.lastAccessed)||0)-p}).slice(0,this.queryCacheLimit).forEach(l=>{c[l]=u[l]}),this.querySubs.set(l=>c),this.loadedNotifyAll()},this._onMergePendingMutations=(s,a)=>{const u=new Map([...s.entries(),...a.entries()]);this.pendingMutations.set(f=>u),this.loadedNotifyAll(),this._rewriteMutationsSorted(this.attrs,s).forEach(([f,l])=>{!a.has(f)&&!l["tx-id"]&&this._sendMutation(f,l)})},this.getPreviousResult=s=>{const a=X(s);return this.dataForQuery(a)},this.notifyOne=s=>{var a,u;const c=(a=this.queryCbs[s])!==null&&a!==void 0?a:[],f=(u=this._dataForQueryCache[s])===null||u===void 0?void 0:u.data,l=this.dataForQuery(s);l&&(vn(l,f)||c.forEach(d=>d.cb(l)))},this.notifyOneQueryOnce=s=>{var a;const u=(a=this.queryOnceDfds[s])!==null&&a!==void 0?a:[],c=this.dataForQuery(s);u.forEach(f=>{this._completeQueryOnce(f.q,s,f.dfd),f.dfd.resolve(c)})},this.notifyQueryError=(s,a)=>{(this.queryCbs[s]||[]).forEach(c=>c.cb({error:a}))},this.pushTx=s=>{try{const a=qf({attrs:this.optimisticAttrs(),schema:this.config.schema,stores:Object.values(this.querySubs.currentValue).map(u=>{var c;return(c=u==null?void 0:u.result)===null||c===void 0?void 0:c.store}),useDateObjects:this.config.useDateObjects},s);return this.pushOps(a)}catch(a){return this.pushOps([],a)}},this.pushOps=(s,a)=>{const u=L(),c=[...this.pendingMutations.currentValue.values()],f=Math.max(0,...c.map(h=>h.order||0))+1,l={op:"transact","tx-steps":s,created:Date.now(),error:a,order:f};this.pendingMutations.set(h=>(h.set(u,l),h));const d=new ji;return this.mutationDeferredStore.set(u,d),this._sendMutation(u,l),this.notifyAll(),d.promise},this._wsOnOpen=s=>{const a=s.target;if(this._ws!==a){this._log.info("[socket][open]",a._id,"skip; this is no longer the current ws");return}this._log.info("[socket][open]",this._ws._id),this._setStatus(xe.OPENED),this.getCurrentUser().then(u=>{var c;this._trySend(L(),{op:"init","app-id":this.config.appId,"refresh-token":(c=u.user)===null||c===void 0?void 0:c.refresh_token,versions:this.versions,"__admin-token":this.config.__adminToken})}).catch(u=>{this._log.error("[socket][error]",a._id,u)})},this._wsOnMessage=s=>{const a=s.target,u=JSON.parse(s.data.toString());if(this._ws!==a){this._log.info("[socket][message]",a._id,u,"skip; this is no longer the current ws");return}this._handleReceive(a._id,JSON.parse(s.data.toString()))},this._wsOnError=s=>{const a=s.target;if(this._ws!==a){this._log.info("[socket][error]",a._id,"skip; this is no longer the current ws");return}this._log.error("[socket][error]",a._id,s)},this._wsOnClose=s=>{const a=s.target;if(this._ws!==a){this._log.info("[socket][close]",a._id,"skip; this is no longer the current ws");return}this._setStatus(xe.CLOSED);for(const u of Object.values(this._rooms))u.isConnected=!1;if(this._isShutdown){this._log.info("[socket][close]",a._id,"Reactor has been shut down and will not reconnect");return}this._log.info("[socket][close]",a._id,"schedule reconnect, ms =",this._reconnectTimeoutMs),setTimeout(()=>{if(this._reconnectTimeoutMs=Math.min(this._reconnectTimeoutMs+1e3,1e4),!this._isOnline){this._log.info("[socket][close]",a._id,"we are offline, no need to start socket");return}this._startSocket()},this._reconnectTimeoutMs)},this.config=Object.assign(Object.assign({},sd),t),this.queryCacheLimit=(i=this.config.queryCacheLimit)!==null&&i!==void 0?i:10,this._log=nd(t.verbose||ko||Pa),this.versions=Object.assign(Object.assign({},o||{}),{"@instantdb/core":Ra}),this.config.schema&&(this._linkIndex=Ai(this.config.schema)),cd()&&(typeof BroadcastChannel=="function"&&(this._broadcastChannel=new BroadcastChannel("@instantdb"),this._broadcastChannel.addEventListener("message",s=>q(this,void 0,void 0,function*(){var a;try{if(((a=s.data)===null||a===void 0?void 0:a.type)==="auth"){const u=yield this.getCurrentUser();this.updateUser(u.user)}}catch(u){this._log.error("[error] handle broadcast channel",u)}}))),this._oauthCallbackResponse=this._oauthLoginInit(),this._initStorage(n),this.getCurrentUser(),r.getIsOnline().then(s=>{this._isOnline=s,this._startSocket(),r.listen(a=>{a!==this._isOnline&&(this._log.info("[network] online =",a),this._isOnline=a,this._isOnline?this._startSocket():(this._log.info("Changing status from",this.status,"to",xe.CLOSED),this._setStatus(xe.CLOSED)))})}),typeof addEventListener<"u"&&(this._beforeUnload=this._beforeUnload.bind(this),addEventListener("beforeunload",this._beforeUnload)))}updateSchema(t){this.config=Object.assign(Object.assign({},this.config),{schema:t,cardinalityInference:!!t}),this._linkIndex=t?Ai(this.config.schema):null}_initStorage(t){this._persister=new t(`instant_${this.config.appId}_5`),this.querySubs=new Ti(this._persister,"querySubs",{},this._onMergeQuerySubs,fd,n=>ld(n,this.config.useDateObjects)),this.pendingMutations=new Ti(this._persister,"pendingMutations",new Map,this._onMergePendingMutations,n=>JSON.stringify([...n.entries()]),n=>new Map(JSON.parse(n))),this._beforeUnloadCbs.push(()=>{this.pendingMutations.flush(),this.querySubs.flush()})}_beforeUnload(){for(const t of this._beforeUnloadCbs)t()}_finishTransaction(t,n,r){const o=this.mutationDeferredStore.get(n);this.mutationDeferredStore.delete(n);const i=t!=="error"&&t!=="timeout";!o&&!i&&console.error("Mutation failed",Object.assign({status:t,eventId:n},r)),o&&(i?o.resolve({status:t,eventId:n}):o.reject(Object.assign({status:t,eventId:n},r)))}_setStatus(t,n){this.status=t,this._errorMessage=n,this.notifyConnectionStatusSubs(t)}_flushEnqueuedRoomData(t){var n,r;const o=(r=(n=this._presence[t])===null||n===void 0?void 0:n.result)===null||r===void 0?void 0:r.user,i=this._broadcastQueue[t];if(this._broadcastQueue[t]=[],o&&this._trySetPresence(t,o),i)for(const s of i){const{topic:a,roomType:u,data:c}=s;this._tryBroadcast(t,u,a,c)}}_handleReceive(t,n){var r,o,i,s,a,u;const c=!!this.config.schema&&("cardinalityInference"in this.config?!!this.config.cardinalityInference:!0);switch(Di[n.op]||this._log.info("[receive]",t,n.op,n),n.op){case"init-ok":this._setStatus(xe.AUTHENTICATED),this._reconnectTimeoutMs=0,this._setAttrs(n.attrs),this._flushPendingMessages(),this._sessionId=n["session-id"];for(const C of Object.keys(this._rooms)){const E=(o=(r=this._presence[C])===null||r===void 0?void 0:r.result)===null||o===void 0?void 0:o.user;this._tryJoinRoom(C,E)}break;case"add-query-exists":this.notifyOneQueryOnce(X(n.q));break;case"add-query-ok":const{q:f,result:l}=n,d=X(f),h=(s=(i=l==null?void 0:l[0])===null||i===void 0?void 0:i.data)===null||s===void 0?void 0:s["page-info"],_=(u=(a=l==null?void 0:l[0])===null||a===void 0?void 0:a.data)===null||u===void 0?void 0:u.aggregate,p=Ri(l),y=$r(this.attrs,p,c,this._linkIndex,this.config.useDateObjects);this.querySubs.set(C=>(C[d].result={store:y,pageInfo:h,aggregate:_,processedTxId:n["processed-tx-id"]},C)),this._cleanupPendingMutationsQueries(),this.notifyOne(d),this.notifyOneQueryOnce(d),this._cleanupPendingMutationsTimeout();break;case"refresh-ok":const{computations:v,attrs:g}=n,m=n["processed-tx-id"];g&&this._setAttrs(g),this._cleanupPendingMutationsTimeout();const w=this._rewriteMutations(this.attrs,this.pendingMutations.currentValue,m);w!==this.pendingMutations.currentValue&&this.pendingMutations.set(()=>w);const b=Ui(w.entries()),k=v.map(C=>{var E,T,Oe,oe;const Fn=C["instaql-query"],ke=C["instaql-result"],Qt=X(Fn),gt=Ri(ke),Wn=$r(this.attrs,gt,c,this._linkIndex,this.config.useDateObjects),Kt=this._applyOptimisticUpdates(Wn,b,m),Jt=(T=(E=ke==null?void 0:ke[0])===null||E===void 0?void 0:E.data)===null||T===void 0?void 0:T["page-info"],ge=(oe=(Oe=ke==null?void 0:ke[0])===null||Oe===void 0?void 0:Oe.data)===null||oe===void 0?void 0:oe.aggregate;return{hash:Qt,store:Kt,pageInfo:Jt,aggregate:ge}});k.forEach(({hash:C,store:E,pageInfo:T,aggregate:Oe})=>{this.querySubs.set(oe=>(oe[C].result={store:E,pageInfo:T,aggregate:Oe,processedTxId:m},oe))}),this._cleanupPendingMutationsQueries(),k.forEach(({hash:C})=>{this.notifyOne(C)});break;case"transact-ok":const{"client-event-id":S,"tx-id":x}=n,N=this._rewriteMutations(this.attrs,this.pendingMutations.currentValue).get(S);if(!N)break;this.pendingMutations.set(C=>(C.set(S,Object.assign(Object.assign({},C.get(S)),{"tx-id":x,confirmed:Date.now()})),C)),this._cleanupPendingMutationsTimeout();const A=N["tx-steps"].filter(([C,...E])=>C==="add-attr").map(([C,E])=>E).concat(Object.values(this.attrs));this._setAttrs(A),this._finishTransaction("synced",S);break;case"patch-presence":{const C=n["room-id"];this._patchPresencePeers(C,n.edits),this._notifyPresenceSubs(C);break}case"refresh-presence":{const C=n["room-id"];this._setPresencePeers(C,n.data),this._notifyPresenceSubs(C);break}case"server-broadcast":const B=n["room-id"],Z=n.topic;this._notifyBroadcastSubs(B,Z,n);break;case"join-room-ok":const z=n["room-id"],re=this._rooms[z];if(!re){this._roomsPendingLeave[z]&&(this._tryLeaveRoom(z),delete this._roomsPendingLeave[z]);break}re.isConnected=!0,this._notifyPresenceSubs(z),this._flushEnqueuedRoomData(z);break;case"join-room-error":const ue=n["room-id"],$=this._rooms[ue];$&&($.error=n.error),this._notifyPresenceSubs(ue);break;case"error":this._handleReceiveError(n);break}}_handleMutationError(t,n,r){const o=this.pendingMutations.currentValue.get(n);o&&(t!=="timeout"||!o["tx-id"])&&(this.pendingMutations.set(i=>(i.delete(n),i)),this.notifyAll(),this.notifyAttrsSubs(),this.notifyMutationErrorSubs(r),this._finishTransaction(t,n,r))}_handleReceiveError(t){var n,r,o,i,s;const a=t["client-event-id"],u=this.pendingMutations.currentValue.get(a),c={message:t.message||"Uh-oh, something went wrong. Ping Joe & Stopa."};if(t.hint&&(c.hint=t.hint),u){const d={message:t.message,hint:t.hint};this._handleMutationError("error",a,d);return}if(!((n=t["original-event"])===null||n===void 0)&&n.hasOwnProperty("q")&&((r=t["original-event"])===null||r===void 0?void 0:r.op)==="add-query"){const d=(o=t["original-event"])===null||o===void 0?void 0:o.q,h=X(d);this.notifyQueryError(X(d),c),this.notifyQueryOnceError(d,h,a,c);return}if(((i=t["original-event"])===null||i===void 0?void 0:i.op)==="init"){if(t.type==="record-not-found"&&((s=t.hint)===null||s===void 0?void 0:s["record-type"])==="app-user"){this.changeCurrentUser(null);return}this._setStatus(xe.ERRORED,c),this.notifyAll();return}const l=Object.assign({},t);delete l.message,delete l.hint,console.error(t.message,l),t.hint&&console.error(`This error comes with some debugging information. Here it is: 
`,t.hint)}notifyQueryOnceError(t,n,r,o){var i;const s=(i=this.queryOnceDfds[n])===null||i===void 0?void 0:i.find(a=>a.eventId===r);s&&(s.dfd.reject(o),this._completeQueryOnce(t,n,s.dfd))}_setAttrs(t){this.attrs=t.reduce((n,r)=>(n[r.id]=r,n),{}),this.notifyAttrsSubs()}_startQuerySub(t,n){const r=L();return this.querySubs.set(o=>(o[n]=o[n]||{q:t,result:null,eventId:r},o[n].lastAccessed=Date.now(),o)),this._trySendAuthed(r,{op:"add-query",q:t}),r}subscribeQuery(t,n,r){var o;r&&"ruleParams"in r&&(t=Object.assign({$$ruleParams:r.ruleParams},t));const i=X(t),s=this.getPreviousResult(t);return s&&n(s),this.queryCbs[i]=(o=this.queryCbs[i])!==null&&o!==void 0?o:[],this.queryCbs[i].push({q:t,cb:n}),this._startQuerySub(t,i),()=>{this._unsubQuery(t,i,n)}}queryOnce(t,n){var r;n&&"ruleParams"in n&&(t=Object.assign({$$ruleParams:n.ruleParams},t));const o=new ji;if(!this._isOnline)return o.reject(new Error("We can't run `queryOnce`, because the device is offline.")),o.promise;if(!this.querySubs)return o.reject(new Error("We can't run `queryOnce` on the backend. Use adminAPI.query instead: https://www.instantdb.com/docs/backend#query")),o.promise;const i=X(t),s=this._startQuerySub(t,i);return this.queryOnceDfds[i]=(r=this.queryOnceDfds[i])!==null&&r!==void 0?r:[],this.queryOnceDfds[i].push({q:t,dfd:o,eventId:s}),setTimeout(()=>o.reject(new Error("Query timed out")),rd),o.promise}_completeQueryOnce(t,n,r){this.queryOnceDfds[n]&&(this.queryOnceDfds[n]=this.queryOnceDfds[n].filter(o=>o.dfd!==r),this._cleanupQuery(t,n))}_unsubQuery(t,n,r){this.queryCbs[n]&&(this.queryCbs[n]=this.queryCbs[n].filter(o=>o.cb!==r),this._cleanupQuery(t,n))}_cleanupQuery(t,n){var r,o;!((r=this.queryCbs[n])===null||r===void 0)&&r.length||!((o=this.queryOnceDfds[n])===null||o===void 0)&&o.length||(delete this.queryCbs[n],delete this.queryOnceDfds[n],this._trySendAuthed(L(),{op:"remove-query",q:t}))}_rewriteMutations(t,n,r){if(!t)return n;const o=f=>{const[l,d,h]=f["forward-identity"];return V(t,d,h)},i=f=>{const[l,d,h]=f["forward-identity"];return Ze(t,d,h)},s={attrIdMap:{},refSwapAttrIds:new Set};let a=!1;const u=(f,l)=>{const d=[];for(const h of f){const[_]=h;if(_==="add-attr"){const[y,v]=h,g=o(v);if(g&&v.id!==g.id){s.attrIdMap[v.id]=g.id,a=!0;continue}if(v["value-type"]==="ref"){const m=i(v);if(m){s.attrIdMap[v.id]=m.id,s.refSwapAttrIds.add(v.id),a=!0;continue}}}if(r&&l&&r>=l&&_==="add-attr"||_==="update-attr"||_==="delete-attr"){a=!0;continue}const p=a?yf(s,h):h;d.push(p)}return a?d:f},c=new Map;for(const[f,l]of n.entries())c.set(f,Object.assign(Object.assign({},l),{"tx-steps":u(l["tx-steps"],l["tx-id"])}));return a?c:n}_rewriteMutationsSorted(t,n){return Ui(this._rewriteMutations(t,n).entries())}optimisticAttrs(){var t;const n=[...this.pendingMutations.currentValue.values()].flatMap(a=>a["tx-steps"]),r=new Set(n.filter(([a,u])=>a==="delete-attr").map(([a,u])=>u)),o=[];for(const[a,u]of n)if(a==="add-attr")o.push(u);else if(a==="update-attr"&&u.id&&(!((t=this.attrs)===null||t===void 0)&&t[u.id])){const c=Object.assign(Object.assign({},this.attrs[u.id]),u);o.push(c)}const i=[...Object.values(this.attrs||{}),...o].filter(a=>!r.has(a.id));return Object.fromEntries(i.map(a=>[a.id,a]))}dataForQuery(t){const n=this._errorMessage;if(n)return{error:n};if(!this.querySubs||!this.pendingMutations)return;const r=this.querySubs.version(),o=this.querySubs.currentValue,i=this.pendingMutations.version(),s=this.pendingMutations.currentValue,{q:a,result:u}=o[t]||{};if(!u)return;const c=this._dataForQueryCache[t];if(c&&r===c.querySubVersion&&i===c.pendingMutationsVersion)return c.data;const{store:f,pageInfo:l,aggregate:d,processedTxId:h}=u,_=this._rewriteMutationsSorted(f.attrs,s),p=this._applyOptimisticUpdates(f,_,h),y=df({store:p,pageInfo:l,aggregate:d},a);return this._dataForQueryCache[t]={querySubVersion:r,pendingMutationsVersion:i,data:y},y}_applyOptimisticUpdates(t,n,r){for(const[o,i]of n)(!i["tx-id"]||r&&i["tx-id"]>r)&&(t=wl(t,i["tx-steps"]));return t}notifyAll(){Object.keys(this.queryCbs).forEach(t=>{this.notifyOne(t)})}loadedNotifyAll(){this.pendingMutations.isLoading()||this.querySubs.isLoading()||this.notifyAll()}shutdown(){var t;this._log.info("[shutdown]",this.config.appId),this._isShutdown=!0,(t=this._ws)===null||t===void 0||t.close()}_sendMutation(t,n){if(n.error){this._handleMutationError("error",t,{error:n.error,message:n.error.message});return}if(this.status!==xe.AUTHENTICATED){this._finishTransaction("enqueued",t);return}const r=Math.max(5e3,this.pendingMutations.currentValue.size*5e3);this._isOnline?(this._trySend(t,n),setTimeout(()=>{this._isOnline&&this._handleMutationError("timeout",t,{message:"transaction timed out"})},r)):this._finishTransaction("enqueued",t)}_flushPendingMessages(){Object.keys(this.queryCbs).map(o=>this.querySubs.currentValue[o]).filter(o=>o).forEach(({eventId:o,q:i})=>{this._trySendAuthed(o,{op:"add-query",q:i})}),Object.values(this.queryOnceDfds).flat().forEach(({eventId:o,q:i})=>{this._trySendAuthed(o,{op:"add-query",q:i})}),this._rewriteMutationsSorted(this.attrs,this.pendingMutations.currentValue).forEach(([o,i])=>{i["tx-id"]||this._sendMutation(o,i)})}_cleanupPendingMutationsQueries(){let t=Number.MAX_SAFE_INTEGER;for(const{result:n}of Object.values(this.querySubs.currentValue))n!=null&&n.processedTxId&&(t=Math.min(t,n==null?void 0:n.processedTxId));this.pendingMutations.set(n=>{for(const[r,o]of Array.from(n.entries()))o["tx-id"]&&o["tx-id"]<=t&&n.delete(r);return n})}_cleanupPendingMutationsTimeout(){const t=Date.now();this.pendingMutations.currentValue.size<200||this.pendingMutations.set(n=>{let r=!1,o=!1;for(const[i,s]of Array.from(n.entries()))s.confirmed||(o=!0),s.confirmed&&s.confirmed+od<t&&(n.delete(i),r=!0);if(r&&o)for(const[i,s]of Array.from(n.entries()))s.confirmed||n.delete(i);return n})}_trySendAuthed(...t){this.status===xe.AUTHENTICATED&&this._trySend(...t)}_trySend(t,n,r){this._ws.readyState===Ii&&(Di[n.op]||this._log.info("[send]",this._ws._id,n.op,n),this._ws.send(JSON.stringify(Object.assign({"client-event-id":t},n))))}_startSocket(){if(this._isShutdown){this._log.info("[socket][start]",this.config.appId,"Reactor has been shut down and will not start a new socket");return}if(this._ws&&this._ws.readyState==id){this._log.info("[socket][start]",this._ws._id,"maintained as current ws, we were still in a connecting state");return}const t=this._ws;this._ws=ud(`${this.config.websocketURI}?app_id=${this.config.appId}`),this._ws.onopen=this._wsOnOpen,this._ws.onmessage=this._wsOnMessage,this._ws.onclose=this._wsOnClose,this._ws.onerror=this._wsOnError,this._log.info("[socket][start]",this._ws._id),(t==null?void 0:t.readyState)===Ii&&(this._log.info("[socket][start]",this._ws._id,"close previous ws id = ",t._id),t.close())}getLocalId(t){return q(this,void 0,void 0,function*(){const n=`localToken_${t}`,r=yield this._persister.getItem(n);if(r)return r;if(this._localIdPromises[n])return this._localIdPromises[n];const o=L();return this._localIdPromises[n]=this._persister.setItem(n,o).then(()=>o),this._localIdPromises[n]})}_replaceUrlAfterOAuth(){if(typeof URL>"u")return;const t=new URL(window.location.href);if(t.searchParams.get(ir)){const n=t.toString();t.searchParams.delete(ir),t.searchParams.delete("code"),t.searchParams.delete("error");const r=t.pathname+(t.searchParams.size?"?"+t.searchParams:"")+t.hash;if(history.replaceState(history.state,"",r),typeof navigation=="object"&&typeof navigation.addEventListener=="function"&&typeof navigation.removeEventListener=="function"){let o=!1;const i=s=>{var a;o||(o=!0,navigation.removeEventListener("navigate",i),!s.userInitiated&&s.navigationType==="replace"&&((a=s.destination)===null||a===void 0?void 0:a.url)===n&&history.replaceState(history.state,"",r))};navigation.addEventListener("navigate",i)}}}_oauthLoginInit(){return q(this,void 0,void 0,function*(){var t,n,r,o;if(typeof window>"u"||typeof window.location>"u"||typeof URLSearchParams>"u")return null;const i=new URLSearchParams(window.location.search);if(!i.get(ir))return null;const s=i.get("error");if(s)return this._replaceUrlAfterOAuth(),{error:{message:s}};const a=i.get("code");if(!a)return null;this._replaceUrlAfterOAuth();try{const{user:u}=yield Mi({apiURI:this.config.apiURI,appId:this.config.appId,code:a});return this.setCurrentUser(u),null}catch(u){return((t=u==null?void 0:u.body)===null||t===void 0?void 0:t.type)==="record-not-found"&&((r=(n=u==null?void 0:u.body)===null||n===void 0?void 0:n.hint)===null||r===void 0?void 0:r["record-type"])==="app-oauth-code"&&(yield this._hasCurrentUser())?null:{error:{message:((o=u==null?void 0:u.body)===null||o===void 0?void 0:o.message)||"Error logging in."}}}})}_waitForOAuthCallbackResponse(){return q(this,void 0,void 0,function*(){return yield this._oauthCallbackResponse})}__subscribeMutationErrors(t){return this.mutationErrorCbs.push(t),()=>{this.mutationErrorCbs=this.mutationErrorCbs.filter(n=>n!==t)}}subscribeAuth(t){this.authCbs.push(t);const n=this._currentUserCached;n.isLoading||t(this._currentUserCached);let r=!1;return this.getCurrentUser().then(o=>{r||vn(o,n)||t(o)}),()=>{r=!0,this.authCbs=this.authCbs.filter(o=>o!==t)}}getAuth(){return q(this,void 0,void 0,function*(){const{user:t,error:n}=yield this.getCurrentUser();if(n)throw n;return t})}subscribeConnectionStatus(t){return this.connectionStatusCbs.push(t),()=>{this.connectionStatusCbs=this.connectionStatusCbs.filter(n=>n!==t)}}subscribeAttrs(t){return this.attrsCbs.push(t),this.attrs&&t(this.attrs),()=>{this.attrsCbs=this.attrsCbs.filter(n=>n!==t)}}notifyAuthSubs(t){this.authCbs.forEach(n=>n(t))}notifyMutationErrorSubs(t){this.mutationErrorCbs.forEach(n=>n(t))}notifyAttrsSubs(){if(!this.attrs)return;const t=this.optimisticAttrs();this.attrsCbs.forEach(n=>n(t))}notifyConnectionStatusSubs(t){this.connectionStatusCbs.forEach(n=>n(t))}setCurrentUser(t){return q(this,void 0,void 0,function*(){yield this._persister.setItem(sr,JSON.stringify(t))})}getCurrentUserCached(){return this._currentUserCached}getCurrentUser(){return q(this,void 0,void 0,function*(){const t=yield this._waitForOAuthCallbackResponse();if(t!=null&&t.error){const o={error:t.error,user:void 0};return this._currentUserCached=Object.assign({isLoading:!1},o),o}const n=yield this._persister.getItem(sr),r={user:JSON.parse(n),error:void 0};return this._currentUserCached=Object.assign({isLoading:!1},r),r})}_hasCurrentUser(){return q(this,void 0,void 0,function*(){const t=yield this._persister.getItem(sr);return JSON.parse(t)!=null})}changeCurrentUser(t){return q(this,void 0,void 0,function*(){var n;const{user:r}=yield this.getCurrentUser();if(!vn(r,t)){yield this.setCurrentUser(t),this.updateUser(t);try{(n=this._broadcastChannel)===null||n===void 0||n.postMessage({type:"auth"})}catch(o){console.error("Error posting message to broadcast channel",o)}}})}updateUser(t){const n={error:void 0,user:t};this._currentUserCached=Object.assign({isLoading:!1},n),this._dataForQueryCache={},this.querySubs.set(r=>(Object.keys(r).forEach(o=>{delete r[o].result}),r)),this._reconnectTimeoutMs=0,this._ws.close(),this._oauthCallbackResponse=null,this.notifyAuthSubs(n)}sendMagicCode({email:t}){return Vf({apiURI:this.config.apiURI,appId:this.config.appId,email:t})}signInWithMagicCode(t){return q(this,arguments,void 0,function*({email:n,code:r}){const o=yield Bf({apiURI:this.config.apiURI,appId:this.config.appId,email:n,code:r});return yield this.changeCurrentUser(o.user),o})}signInWithCustomToken(t){return q(this,void 0,void 0,function*(){const n=yield Hf({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:t});return yield this.changeCurrentUser(n.user),n})}potentiallyInvalidateToken(t,n){var r;const o=(r=t==null?void 0:t.user)===null||r===void 0?void 0:r.refresh_token;if(!o)return;if(n.invalidateToken===!1){this._log.info("[auth-invalidate] skipped invalidateToken");return}Kf({apiURI:this.config.apiURI,appId:this.config.appId,refreshToken:o}).then(()=>{this._log.info("[auth-invalidate] completed invalidateToken")}).catch(s=>{})}signOut(t){return q(this,void 0,void 0,function*(){const n=yield this.getCurrentUser();this.potentiallyInvalidateToken(n,t),yield this.changeCurrentUser(null)})}createAuthorizationURL({clientName:t,redirectURL:n}){const{apiURI:r,appId:o}=this.config;return`${r}/runtime/oauth/start?app_id=${o}&client_name=${t}&redirect_uri=${n}`}exchangeCodeForToken(t){return q(this,arguments,void 0,function*({code:n,codeVerifier:r}){const o=yield Mi({apiURI:this.config.apiURI,appId:this.config.appId,code:n,codeVerifier:r});return yield this.changeCurrentUser(o.user),o})}issuerURI(){const{apiURI:t,appId:n}=this.config;return`${t}/runtime/${n}`}signInWithIdToken(t){return q(this,arguments,void 0,function*({idToken:n,clientName:r,nonce:o}){var i;const s=yield this.getCurrentUser(),a=(i=s==null?void 0:s.user)===null||i===void 0?void 0:i.refresh_token,u=yield Qf({apiURI:this.config.apiURI,appId:this.config.appId,idToken:n,clientName:r,nonce:o,refreshToken:a});return yield this.changeCurrentUser(u.user),u})}joinRoom(t,n){return this._rooms[t]||(this._rooms[t]={isConnected:!1,error:void 0}),this._presence[t]=this._presence[t]||{},n&&(this._presence[t].result=this._presence[t].result||{},this._presence[t].result.user=n,this._notifyPresenceSubs(t)),this._tryJoinRoom(t,n),()=>{this._cleanupRoom(t)}}_cleanupRoom(t){var n,r,o,i;if(!(!((r=(n=this._presence[t])===null||n===void 0?void 0:n.handlers)===null||r===void 0)&&r.length)&&!Object.keys((o=this._broadcastSubs[t])!==null&&o!==void 0?o:{}).length){const s=(i=this._rooms[t])===null||i===void 0?void 0:i.isConnected;delete this._rooms[t],delete this._presence[t],delete this._broadcastSubs[t],s?this._tryLeaveRoom(t):this._roomsPendingLeave[t]=!0}}getPresence(t,n,r={}){const o=this._rooms[n],i=this._presence[n];return!o||!i||!i.result?null:Object.assign(Object.assign({},ed(i.result,r,this._sessionId)),{isLoading:!o.isConnected,error:o.error})}publishPresence(t,n,r){const o=this._rooms[n],i=this._presence[n];if(!o||!i)return;i.result=i.result||{};const s=Object.assign(Object.assign({},i.result.user),r);i.result.user=s,o.isConnected&&(this._trySetPresence(n,s),this._notifyPresenceSubs(n))}_trySetPresence(t,n){this._trySendAuthed(L(),{op:"set-presence","room-id":t,data:n})}_tryJoinRoom(t,n){this._trySendAuthed(L(),{op:"join-room","room-id":t,data:n}),delete this._roomsPendingLeave[t]}_tryLeaveRoom(t){this._trySendAuthed(L(),{op:"leave-room","room-id":t})}subscribePresence(t,n,r,o){const i=this.joinRoom(n,r.data),s=Object.assign(Object.assign({},r),{roomId:n,cb:o,prev:null});return this._presence[n]=this._presence[n]||{},this._presence[n].handlers=this._presence[n].handlers||[],this._presence[n].handlers.push(s),this._notifyPresenceSub(n,s),()=>{var a,u,c;this._presence[n].handlers=(c=(u=(a=this._presence[n])===null||a===void 0?void 0:a.handlers)===null||u===void 0?void 0:u.filter(f=>f!==s))!==null&&c!==void 0?c:[],i()}}_notifyPresenceSubs(t){var n,r;(r=(n=this._presence[t])===null||n===void 0?void 0:n.handlers)===null||r===void 0||r.forEach(o=>{this._notifyPresenceSub(t,o)})}_notifyPresenceSub(t,n){const r=this.getPresence("",t,n);r&&(n.prev&&!td(r,n.prev)||(n.prev=r,n.cb(r)))}_patchPresencePeers(t,n){var r,o,i;const s=((o=(r=this._presence[t])===null||r===void 0?void 0:r.result)===null||o===void 0?void 0:o.peers)||{};let a=Object.fromEntries(Object.entries(s).map(([c,f])=>[c,{data:f}]));(i=this._presence[t])===null||i===void 0||i.result;const u=Cr(a,c=>{for(let[f,l,d]of n)switch(l){case"+":Bc(c,f,d);break;case"r":mi(c,f,d);break;case"-":da(c,f);break}delete c[this._sessionId]});this._setPresencePeers(t,u)}_setPresencePeers(t,n){const r=Object.assign({},n);delete r[this._sessionId];const o=Object.fromEntries(Object.entries(r).map(([i,s])=>[i,s.data]));this._presence=Cr(this._presence,i=>{mi(i,[t,"result","peers"],o)})}publishTopic({roomType:t,roomId:n,topic:r,data:o}){var i;const s=this._rooms[n];if(s){if(!s.isConnected){this._broadcastQueue[n]=(i=this._broadcastQueue[n])!==null&&i!==void 0?i:[],this._broadcastQueue[n].push({topic:r,roomType:t,data:o});return}this._tryBroadcast(n,t,r,o)}}_tryBroadcast(t,n,r,o){this._trySendAuthed(L(),{op:"client-broadcast","room-id":t,roomType:n,topic:r,data:o})}subscribeTopic(t,n,r){const o=this.joinRoom(t);return this._broadcastSubs[t]=this._broadcastSubs[t]||{},this._broadcastSubs[t][n]=this._broadcastSubs[t][n]||[],this._broadcastSubs[t][n].push(r),this._presence[t]=this._presence[t]||{},()=>{this._broadcastSubs[t][n]=this._broadcastSubs[t][n].filter(i=>i!==r),this._broadcastSubs[t][n].length||delete this._broadcastSubs[t][n],o()}}_notifyBroadcastSubs(t,n,r){var o,i,s;(s=(i=(o=this._broadcastSubs)===null||o===void 0?void 0:o[t])===null||i===void 0?void 0:i[n])===null||s===void 0||s.forEach(a=>{var u,c,f,l,d,h;const _=(u=r.data)===null||u===void 0?void 0:u.data,p=r.data["peer-id"]===this._sessionId?(f=(c=this._presence[t])===null||c===void 0?void 0:c.result)===null||f===void 0?void 0:f.user:(h=(d=(l=this._presence[t])===null||l===void 0?void 0:l.result)===null||d===void 0?void 0:d.peers)===null||h===void 0?void 0:h[r.data["peer-id"]];return a(_,p)})}uploadFile(t,n,r){return q(this,void 0,void 0,function*(){var o;const i=yield this.getCurrentUser(),s=(o=i==null?void 0:i.user)===null||o===void 0?void 0:o.refresh_token;return Jf(Object.assign(Object.assign({},r),{apiURI:this.config.apiURI,appId:this.config.appId,path:t,file:n,refreshToken:s}))})}deleteFile(t){return q(this,void 0,void 0,function*(){var n;const r=yield this.getCurrentUser(),o=(n=r==null?void 0:r.user)===null||n===void 0?void 0:n.refresh_token;return yield Yf({apiURI:this.config.apiURI,appId:this.config.appId,path:t,refreshToken:o})})}upload(t,n){return q(this,void 0,void 0,function*(){var r;const o=yield this.getCurrentUser(),i=(r=o==null?void 0:o.user)===null||r===void 0?void 0:r.refresh_token,s=t||n.name,a=yield Gf({apiURI:this.config.apiURI,appId:this.config.appId,fileName:s,refreshToken:i});return yield Zf(a,n)})}getDownloadUrl(t){return q(this,void 0,void 0,function*(){var n;const r=yield this.getCurrentUser(),o=(n=r==null?void 0:r.user)===null||n===void 0?void 0:n.refresh_token;return yield Xf({apiURI:this.config.apiURI,appId:this.config.appId,path:t,refreshToken:o})})}}class he{constructor(t,n,r,o={indexed:!1,unique:!1}){this.valueType=t,this.required=n,this.isIndexed=r,this.config=o,this.metadata={}}clientRequired(){return new he(this.valueType,!1,this.isIndexed,this.config)}optional(){return new he(this.valueType,!1,this.isIndexed,this.config)}unique(){return new he(this.valueType,this.required,this.isIndexed,Object.assign(Object.assign({},this.config),{unique:!0}))}indexed(){return new he(this.valueType,this.required,!0,Object.assign(Object.assign({},this.config),{indexed:!0}))}}class Un{constructor(t,n){this.attrs=t,this.links=n}asType(){return new Un(this.attrs,this.links)}}class Ln{constructor(t,n,r){this.entities=t,this.links=n,this.rooms=r}withRoomSchema(){return new Ln(this.entities,this.links,{})}}function hd(e,t){return new Ln(Aa(e,t),t,void 0)}function pd(e){return new Un(e,{})}function _d(){return new he("string",!0,!1)}function vd(){return new he("number",!0,!1)}function yd(){return new he("boolean",!0,!1)}function gd(){return new he("date",!0,!1)}function md(){return new he("json",!0,!1)}function bd(){return new he("json",!0,!1)}function Aa(e,t){var n,r,o,i;const s={fwd:{},rev:{}};for(const u of Object.values(t))(n=s.fwd)[r=u.forward.on]||(n[r]={}),(o=s.rev)[i=u.reverse.on]||(o[i]={}),s.fwd[u.forward.on][u.forward.label]={entityName:u.reverse.on,cardinality:u.forward.has},s.rev[u.reverse.on][u.reverse.label]={entityName:u.forward.on,cardinality:u.reverse.has};return Object.fromEntries(Object.entries(e).map(([u,c])=>[u,new Un(c.attrs,Object.assign(Object.assign({},s.fwd[u]),s.rev[u]))]))}function wd({entities:e,links:t,rooms:n}){const r=t??{},o=n??{};return new Ln(Aa(e,r),r,o)}const Ce={graph:hd,schema:wd,entity:pd,string:_d,number:vd,boolean:yd,date:gd,json:md,any:bd};let sn;function Sd(e,t){sn==null||sn.dispose();const n=Ed(t),r=xd(t,a),o=kd(Od(e));function i(f){var l;f.source===o.element.contentWindow&&((l=f.data)===null||l===void 0?void 0:l.type)==="close"&&n.isVisible()&&a()}function s(f){const l=f.shiftKey&&f.ctrlKey&&f.key==="0",d=f.key==="Escape"||f.key==="Esc";(l||d&&n.isVisible())&&a()}function a(){n.isVisible()?n.element.style.display="none":(n.element.style.display="block",n.element.contains(o.element)||n.element.appendChild(o.element))}function u(){n.element.remove(),r.element.remove(),removeEventListener("keydown",s),removeEventListener("message",i)}function c(){document.body.appendChild(n.element),document.body.appendChild(r.element),addEventListener("keydown",s),addEventListener("message",i),sn={dispose:u}}return c()}function Od(e){return`${ko||ja?"http://localhost:3000":"https://instantdb.com"}/_devtool?appId=${e}`}function kd(e){const t=document.createElement("iframe");return t.src=e,t.className="instant-devtool-iframe",Object.assign(t.style,{width:"100%",height:"100%",backgroundColor:"white",border:"none"}),{element:t}}function xd(e,t){const n=`
    <svg width="32" height="32" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="512" height="512" fill="black"/>
      <rect x="97.0973" y="91.3297" width="140" height="330" fill="white"/>
    </svg>
  `,r=document.createElement("button");return r.innerHTML=n,r.className="instant-devtool-toggler",Object.assign(r.style,Object.assign(Object.assign({position:"fixed"},Cd(e.position)),{height:"32px",width:"32px",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"9010",padding:"0",margin:"0",border:"none",cursor:"pointer"})),r.addEventListener("click",t),{element:r}}function Cd(e){switch(e){case"bottom-left":return{bottom:"24px",left:"24px"};case"bottom-right":return{bottom:"24px",right:"24px"};case"top-right":return{top:"24px",right:"24px"};case"top-left":return{top:"24px",left:"24px"}}}function $d(e){switch(e){case"bottom-left":return{bottom:"24px",right:"24px",left:"60px",top:"72px"};case"bottom-right":return{bottom:"24px",left:"24px",right:"60px",top:"72px"};case"top-right":return{top:"24px",left:"24px",right:"60px",bottom:"72px"};case"top-left":return{top:"24px",right:"24px",left:"60px",bottom:"72px"}}}function Ed(e){const t=document.createElement("div");Object.assign(t.style,Object.assign(Object.assign({position:"fixed"},$d(e.position)),{display:"block",borderRadius:"4px",border:"1px #ccc solid",boxShadow:"0px 0px 8px #00000044",backgroundColor:"#eee",zIndex:"999990"})),t.style.display="none",t.className="instant-devtool-container";function n(){return t.style.display!=="none"}return{element:t,isVisible:n}}const Md={apiURI:"https://api.instantdb.com",websocketURI:"wss://api.instantdb.com/runtime/session"};function Pd(){var e;return globalThis.__instantDbSchemaHashStore=(e=globalThis.__instantDbSchemaHashStore)!==null&&e!==void 0?e:new WeakMap,globalThis.__instantDbSchemaHashStore}function jd(){var e;return globalThis.__instantDbStore=(e=globalThis.__instantDbStore)!==null&&e!==void 0?e:{},globalThis.__instantDbStore}function Lr(e){const t=e.__adminToken;return e.appId+"_"+(e.websocketURI||"default_ws_uri")+"_"+(e.apiURI||"default_api_uri")+"_"+(t||"client_only")+"_"+e.useDateObjects}const Nr=jd(),ar=Pd();class Td{constructor(t){this.db=t,this.sendMagicCode=n=>this.db.sendMagicCode(n),this.signInWithMagicCode=n=>this.db.signInWithMagicCode(n),this.signInWithToken=n=>this.db.signInWithCustomToken(n),this.createAuthorizationURL=n=>this.db.createAuthorizationURL(n),this.signInWithIdToken=n=>this.db.signInWithIdToken(n),this.exchangeOAuthCode=n=>this.db.exchangeCodeForToken(n),this.issuerURI=()=>this.db.issuerURI(),this.signOut=(n={invalidateToken:!0})=>this.db.signOut(n)}}class Rd{constructor(t){this.db=t,this.uploadFile=(n,r,o={})=>this.db.uploadFile(n,r,o),this.delete=n=>this.db.deleteFile(n),this.upload=(n,r)=>this.db.upload(n,r),this.put=this.upload,this.getDownloadUrl=n=>this.db.getDownloadUrl(n)}}class Ad{constructor(t){this.tx=xa(),this._reactor=t,this.auth=new Td(this._reactor),this.storage=new Rd(this._reactor)}transact(t){return this._reactor.pushTx(t)}getLocalId(t){return this._reactor.getLocalId(t)}subscribeQuery(t,n,r){return this._reactor.subscribeQuery(t,n,r)}subscribeAuth(t){return this._reactor.subscribeAuth(t)}getAuth(){return this._reactor.getAuth()}subscribeConnectionStatus(t){return this._reactor.subscribeConnectionStatus(t)}joinRoom(t="_defaultRoomType",n="_defaultRoomId",r){return{leaveRoom:this._reactor.joinRoom(n,r==null?void 0:r.initialPresence),subscribeTopic:(i,s)=>this._reactor.subscribeTopic(n,i,s),subscribePresence:(i,s)=>this._reactor.subscribePresence(t,n,i,s),publishTopic:(i,s)=>this._reactor.publishTopic({roomType:t,roomId:n,topic:i,data:s}),publishPresence:i=>this._reactor.publishPresence(t,n,i),getPresence:i=>this._reactor.getPresence(t,n,i)}}shutdown(){delete Nr[Lr(this._reactor.config)],this._reactor.shutdown()}queryOnce(t,n){return this._reactor.queryOnce(t,n)}}function Li(e){if(!e)return"0";if(ar.get(e))return ar.get(e);const t=X(e);return ar.set(e,t),t}function Id(e,t){return Li(e._reactor.config.schema)!==Li(t)}function Dd(e,t,n,r){const o=Nr[Lr(e)];if(o)return Id(o,e.schema)&&o._reactor.updateSchema(e.schema),o;const i=new dd(Object.assign(Object.assign(Object.assign({},Md),e),{cardinalityInference:!!e.schema}),t||Ea,n||Ma,Object.assign(Object.assign({},r||{}),{"@instantdb/core":Ra})),s=new Ad(i);return Nr[Lr(e)]=s,Ud(e.appId,e.devtool),s}function Ud(e,t){if(typeof window>"u"||typeof window.location>"u"||typeof document>"u"||typeof t=="boolean"&&!t)return;const n=Object.assign({position:"bottom-right",allowedHosts:["localhost"]},typeof t=="object"?t:{});n.allowedHosts.includes(window.location.hostname)&&Sd(e,n)}const Ld=Ce.schema({entities:{party:Ce.entity({name:Ce.string().unique().indexed()}),roomEvent:Ce.entity({it:Ce.any()}),curretLine:Ce.entity({color:Ce.string(),dots:Ce.any(),width:Ce.number()})},links:{partyRoomEvents:{forward:{on:"party",has:"many",label:"roomEvents"},reverse:{on:"roomEvent",has:"one",label:"party"}},partyCurrentLine:{forward:{on:"party",has:"one",label:"currentLine"},reverse:{on:"curretLine",has:"one",label:"party"}}},rooms:{}}),Nd=Ld,zd="59599101-16e7-493b-8644-ccb75b6cb032",F=Dd({appId:zd,schema:Nd}),Ia=G(),Da=Lu(Ia,"");F.getLocalId("guest").then(e=>Ia(e));const Ua=ve(""),yt=ve({points:[],color:"#000000",size:8,isBucket:!1});Da.watch(console.log);const Nn=ve([]),qd=ve(!0),zn=ve("normal"),xo=ve(!1),qe=G(),La=G(),Na=G(),za=G(),qa=G(),qn=G(),Fd=G(),Fa=G();Nn.on(Fa,(e,{history:t})=>e.length<t.length?t:e);Ua.on(La,(e,t)=>t);yt.on(qe,(e,t)=>({...e,...t})).on(qn,e=>({...e,points:[]}));zn.on(Na,(e,t)=>t);xo.on(za,(e,t)=>t);const Wd=Nn.map(e=>{const t=[];return e.forEach((n,r)=>{if(n.type==="line"){const o=ta(n.dots,{...na,size:n.width});t.push({d:Xs(o),color:n.color})}else n.type==="bucket"||n.type==="undo"&&t.pop()}),t});F.subscribeQuery({party:{$:{where:{id:Ge}},currentLine:{}}},e=>{var t;e.error&&console.error(e.error),e.data&&((t=e.data.party[0])!=null&&t.currentLine?(console.log("setCurrentLineID",e.data.party[0]),La(e.data.party[0].currentLine.id),qe({size:e.data.party[0].currentLine.width,color:e.data.party[0].currentLine.color})):console.log("no party or currentLine",e.data.party[0]))});F.subscribeQuery({roomEvent:{$:{where:{party:Ge},order:{serverCreatedAt:"asc"}}}},e=>{e.error&&console.error(e.error),e.data&&Fa({history:e.data.roomEvent.map(t=>t.it)})});Ls([yt,qd,Ua]).watch(([e,t,n])=>{t&&n&&F.transact(F.tx.curretLine[n].update({width:e.size,dots:e.points,color:e.color}))});qn.watch(e=>{F.transact(F.tx.roomEvent[L()].create({it:{type:"line",dots:e.points,color:e.color,width:e.size}}).link({party:Ge}))});qa.watch(()=>{F.transact(F.tx.roomEvent[L()].create({it:{type:"undo"}}).link({party:Ge}))});async function Vd(){console.log("------- RESET All -------");let e=await F.queryOnce({party:{}}).then(n=>n.data.party);console.log("allParties.len",e.length);let t=await F.queryOnce({curretLine:{}}).then(n=>n.data.curretLine);console.log("curretLines.len",t.length),F.transact([...e.map(n=>F.tx.party[n.id].delete()),...t.map(n=>F.tx.curretLine[n.id].delete())]).then(()=>(console.log("DELETED"),F.transact([F.tx.party[Ge].create({name:"demo party"})]))).then(()=>(console.log("Created party",Ge),F.transact([F.tx.curretLine[L()].create({dots:[],width:8,color:"#34495e"}).link({party:Ge})]))).then(()=>{window.location.reload()})}function an(e){const n=document.querySelector("#player-canvas").getBoundingClientRect(),r=ie/n.width;if("touches"in e){const o=e.touches[0]||e.changedTouches[0];return{x:(o.clientX-n.left)*r,y:(o.clientY-n.top)*r}}else return{x:(e.clientX-n.left)*r,y:(e.clientY-n.top)*r}}function Bd(){const[e,t]=De(!1),n=te(yt),r=te(xo),o=u=>{u.preventDefault();const{x:c,y:f}=an(u);qe({points:[[c,f]]}),t(!0)},i=u=>{if(!e)return;u.preventDefault();const{x:c,y:f}=an(u);qe({points:[...n.points,[c,f]]})},s=u=>{if(!e)return;u&&u.preventDefault();const{x:c,y:f}=an(u);qn({points:[...n.points,[c,f]],color:n.color,size:n.size,isBucket:!1}),t(!1)};return O("div",{style:{margin:"0 auto",maxWidth:"500px",maxHeight:"100%",height:"auto",aspectRatio:"1 / 1",display:"flex",justifyContent:"center",backgroundColor:"#faf9f5"}},O("svg",{id:"player-canvas",onClick:u=>{if(!n.isBucket)return;console.log("onBucket",n),u&&u.preventDefault();const{x:c,y:f}=an(u);Fd({x:c,y:f,color:n.color})},onMouseDown:o,onMouseMove:i,onMouseUp:s,onMouseLeave:s,onTouchStart:o,onTouchMove:i,onTouchEnd:s,onTouchCancel:s,viewBox:`0 0 ${ie} ${ie}`,style:{touchAction:"none",border:"2px dashed #ccc",cursor:"crosshair",aspectRatio:"1 / 1"}},!1,O(Hd,null),O("path",{d:Xs(ta(n.points,{...na,size:n.size})),fill:n.color}),r&&O(Qd,null)))}const Hd=$n(()=>te(Wd).map((t,n)=>O("path",{key:"ExistingLines"+n,d:t.d,fill:t.color}))),Qd=$n(()=>te(Nn).map((t,n)=>t.type==="line"?O("g",{key:"debug"+n},O("polyline",{points:t.dots.map(([r,o])=>`${r},${o}`).join(" ")||"",stroke:"white",strokeWidth:2,strokeDasharray:"2,5",fill:"none"}),t.dots.map(([r,o],i)=>O("circle",{key:`${n}-${i}`,cx:r,cy:o,r:1,fill:`hsl(0, 70%, ${i%5*10+30}%)`}))):null)),Ue=window.devicePixelRatio;function Kd({}={}){const e=Fe(null),[t,n]=De(!1),r=te(Nn),o=te(yt),i=te(zn),{color:s,size:a}=o,u=[];r.forEach(p=>{p.type==="line"&&(p.dots.forEach((y,v)=>{v===0&&u.push(["start",y[0],y[1]]),u.push(["move",y[0],y[1]])}),u.push(["end"]))});const c=gc(u).map(p=>mc(Array.from(yc(p.flat(),{tension:.5,numOfSeg:10,close:!1})))),f=i==="debug"?"old":"new";Ne(()=>{if(f!=="new")return;const p=e.current;if(!p)return;p.width=Math.floor(ie*Ue),p.height=Math.floor(ie*Ue);const y=p.getContext("2d");y&&(y.scale(Ue,Ue),y.strokeStyle=s,y.lineWidth=a,y.lineCap="round",y.clearRect(0,0,ie,ie),y.beginPath(),c.forEach(v=>{y.moveTo(v[0][0],v[0][1]),v.forEach(([g,m])=>{y.lineTo(g,m)})}),y.stroke())},[r,f,s,a]),Ne(()=>{if(f!=="old")return;const p=e.current;if(!p)return;p.width=Math.floor(ie*Ue),p.height=Math.floor(ie*Ue);const y=p.getContext("2d");y&&(y.scale(Ue,Ue),y.strokeStyle=s,y.lineWidth=a,y.lineCap="round",y.clearRect(0,0,ie,ie),y.beginPath(),u.forEach(v=>{const[g,m,w]=v;g==="start"?y.moveTo(m,w):g==="move"?y.lineTo(m,w):g==="end"||console.log("Unknown event",v)}),y.stroke())},[r,f,s,a]);const l=p=>{const y=e.current;if(!y)return null;const v=ie/y.getBoundingClientRect().width,g=y.getBoundingClientRect();if("touches"in p){const m=p.touches[0]||p.changedTouches[0];return{x:(m.clientX-g.left)*v,y:(m.clientY-g.top)*v}}else return{x:(p.clientX-g.left)*v,y:(p.clientY-g.top)*v}},d=p=>{p.preventDefault();const y=e.current;if(!y)return;const v=y.getContext("2d");if(!v)return;const g=l(p);if(!g)return;const{x:m,y:w}=g;v.beginPath(),v.moveTo(m,w),qe({points:[[m,w]]}),n(!0)},h=p=>{if(!t)return;p.preventDefault();const y=e.current;if(!y)return;const v=y.getContext("2d");if(!v)return;const g=l(p);if(!g)return;const{x:m,y:w}=g;v.lineTo(m,w),v.stroke(),qe({points:[...o.points,[m,w]]})},_=p=>{if(!t)return;p&&p.preventDefault();const y=p?l(p):null,v=y?[...o.points,[y.x,y.y]]:o.points;qn({points:v,color:o.color,size:o.size,isBucket:!1}),n(!1)};return O("div",{style:{margin:"0 auto",maxWidth:"500px",maxHeight:"100%",height:"auto",aspectRatio:"1 / 1",display:"flex",justifyContent:"center",backgroundColor:"#faf9f5"}},O("canvas",{ref:e,style:{border:"2px dashed #ccc",cursor:"crosshair",width:"100%",aspectRatio:"1",touchAction:"none"},onMouseDown:d,onMouseMove:h,onMouseUp:_,onMouseLeave:_,onTouchStart:d,onTouchMove:h,onTouchEnd:_,onTouchCancel:_}))}const St=[3,8,15,20,25];function Jd(){const{size:e,isBucket:t}=te(yt);Fe(null);const n=St.indexOf(e),r=n===St.length-1,o=Math.max(...St),i=4;let s=n*o+i*n;return r&&(s-=2),O("div",{style:{display:"inline-flex",gap:"4px",position:"relative",height:"32px",backgroundColor:"#eee",borderRadius:"16px",cursor:"pointer",padding:"4px",boxShadow:"0 0px 4px rgba(0,0,0,0.1)",overflow:"hidden"}},O("div",{style:{position:"absolute",left:s+"px",display:"flex",top:"0px",width:n===St.length-1?o+10+"px":o+4+"px",height:"100%",backgroundColor:"#007bff"}}),O("div",{style:{display:"flex",gap:i+"px",position:"relative",width:"100%"}},St.map((a,u)=>O("div",{onClick:()=>{qe({size:a,isBucket:!1})},key:a,style:{display:"flex",width:o+"px",height:o+"px"}},O("div",{style:{margin:"auto",width:`${a}px`,height:`${a}px`,backgroundColor:a===e?"#555":"#666",borderRadius:"50%"}})))))}const Yd="data:image/svg+xml,%3csvg%20width='32'%20height='32'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M29%2023C29%2023.2652%2028.8946%2023.5196%2028.7071%2023.7071C28.5196%2023.8946%2028.2652%2024%2028%2024C27.7348%2024%2027.4804%2023.8946%2027.2929%2023.7071C27.1054%2023.5196%2027%2023.2652%2027%2023C26.9997%2020.8246%2026.3545%2018.6981%2025.1457%2016.8894C23.937%2015.0807%2022.2192%2013.671%2020.2093%2012.8386C18.1995%2012.0061%2015.988%2011.7883%2013.8544%2012.2126C11.7208%2012.6369%209.76087%2013.6844%208.2225%2015.2225L5.425%2018H11C11.2652%2018%2011.5196%2018.1053%2011.7071%2018.2929C11.8946%2018.4804%2012%2018.7348%2012%2019C12%2019.2652%2011.8946%2019.5196%2011.7071%2019.7071C11.5196%2019.8946%2011.2652%2020%2011%2020H3C2.73478%2020%202.48043%2019.8946%202.29289%2019.7071C2.10536%2019.5196%202%2019.2652%202%2019V11C2%2010.7348%202.10536%2010.4804%202.29289%2010.2929C2.48043%2010.1053%202.73478%209.99999%203%209.99999C3.26522%209.99999%203.51957%2010.1053%203.70711%2010.2929C3.89464%2010.4804%204%2010.7348%204%2011V16.5962L6.81%2013.805C8.62837%2011.9876%2010.9448%2010.7501%2013.4664%2010.249C15.988%209.74799%2018.6015%2010.0059%2020.9765%2010.99C23.3516%2011.9742%2025.3815%2013.6405%2026.8097%2015.7782C28.2378%2017.9159%2029%2020.4291%2029%2023Z'%20fill='%23343330'/%3e%3c/svg%3e",Ni=28,Gd=8;function Zd(){const e=["#111111","#34495e","#faf9f5","#ffffff","#8b4513","#fa3224","#ffa729","#ffd129","#2ecc71","#3498db","#9b59b6","#ff69b4"],{color:t}=te(yt);return O("div",{style:{flexWrap:"wrap",display:"flex",gap:Gd+"px",justifyContent:"space-between"}},e.map((n,r)=>O("button",{key:n,onClick:()=>qe({color:n}),style:{width:Ni+"px",height:Ni+"px",border:r===2||r===3?"1px solid #333":"none",borderRadius:"100%",padding:"0",backgroundColor:n,cursor:"pointer",boxShadow:n===t?"0 0 0 2px #fff, 0 0 0 5px rgb(0, 123, 255)":"none"}})))}function Xd(){const[e,t]=De(!0),n=te(zn),r=te(xo),o=te(Da);return O("div",{style:{position:"fixed",top:"10px",left:"10px",fontSize:"14px",zIndex:1e3}},O("button",{onClick:()=>t(!e),style:{padding:"6px 10px",fontSize:"12px",backgroundColor:"#f0f0f0",border:"1px solid #ccc",borderRadius:"4px",cursor:"pointer"}},"Dev ",e?"▼":"▲"),!e&&O("div",{style:{marginTop:"8px",padding:"8px",border:"1px solid #ddd",borderRadius:"4px",backgroundColor:"#f9f9f9"}},O("p",null,o),O("div",{style:{marginBottom:"8px"}},O("select",{value:n,onChange:s=>{const a=s.target;Na(a.value)},style:{padding:"2px 6px",fontSize:"12px",border:"1px solid #ccc",borderRadius:"3px"}},O("option",{value:"normal"},"Normal"),O("option",{value:"old"},"Canvas Old"))),O("div",null,O("label",{style:{fontSize:"12px"}},O("input",{type:"checkbox",checked:r,onChange:s=>za(s.target.checked),style:{marginRight:"6px"}}),"Debug overlay"))))}function eh(){const[e,t]=De(!1),n=te(zn);return Ne(()=>{setTimeout(()=>{t(!0)},500)},[]),e?O("div",{style:{height:"100%",display:"grid",gridTemplateRows:"min-content 1fr min-content",gap:"16px",padding:"16px",justifyItems:"center",width:"100%",maxWidth:"500px"}},O(Xd,null),O("div",null,O("div",{style:{display:"flex",gap:"32px",alignItems:"center",flexWrap:"wrap"}},O(Au,{href:"/scribble/"},"главная"),O("div",null,O("button",{onClick:Vd},"reset")),O("a",{href:"https://joxter.github.io/scribble/",target:"_blank"},"website"))),O("div",{style:{overflow:"hidden",width:"100%"}},O(n==="old"?Kd:Bd,null)),O("div",{style:{width:"100%",display:"flex",gap:"20px",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between",marginBottom:"10px"}},O("button",{onClick:qa},O("img",{style:{width:"20px"},src:Yd})),O(Jd,null)),O("div",{style:{width:"100%"}},O(Zd,null))):O("p",null,"no show")}function th(){return O("div",{style:{height:"100%"}},O(Iu,null,O(Zo,{path:"/scribble/",component:eh}),O(Zo,null,"404: No such page!")))}ct(O(th,null),document.getElementById("app"));
